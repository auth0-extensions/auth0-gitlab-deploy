module.exports=function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";"use latest";var r=n(93),s=n(191),i=n(7);i.info("Starting webtask.");var o=null,u=function(t,e){return o||(r.defaults({AUTH0_DOMAIN:t.webtaskContext.secrets.AUTH0_DOMAIN,AUTH0_CLIENT_ID:t.webtaskContext.secrets.AUTH0_CLIENT_ID,AUTH0_CLIENT_SECRET:t.webtaskContext.secrets.AUTH0_CLIENT_SECRET,EXTENSION_SECRET:t.webtaskContext.secrets.EXTENSION_SECRET,NODE_ENV:"production",HOSTING_ENV:"webtask",CLIENT_VERSION:"0.1.0",SLACK_INCOMING_WEBHOOK_URL:t.webtaskContext.secrets.SLACK_INCOMING_WEBHOOK_URL,GITLAB_BRANCH:t.webtaskContext.secrets.GITLAB_BRANCH,GITLAB_REPOSITORY:t.webtaskContext.secrets.GITLAB_REPOSITORY,GITLAB_TOKEN:t.webtaskContext.secrets.GITLAB_TOKEN,WT_URL:t.webtaskContext.secrets.WT_URL}),o=n(97)(t.webtaskContext.storage)),o(t,e)};t.exports=s.fromExpress(function(t,e){return u(t,e)})},function(t,e,n){(function(){var e,r=function(t,e){return function(){return t.apply(e,arguments)}};e=n(6)("gitlab:BaseModel"),t.exports=function(){function t(t){this.client=t,this._init=r(this._init,this),this.load=r(this.load,this),this._init()}return t.prototype.load=function(t){return n(169)("./"+t)(this.client)},t.prototype._init=function(){if(this.debug=n(6)("gitlab:Models:"+this.constructor.name),this.get=this.client.get,this.post=this.client.post,this.put=this.client.put,this["delete"]=this.client["delete"],null!=this.init)return this.init()},t}()}).call(this)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){(function(){var e;e=function(){function t(){}return t.parseProjectId=function(t){return"number"==typeof t?t:t=t.indexOf("/")!==-1?encodeURIComponent(t):parseInt(t)},t}(),t.exports=e}).call(this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.setProvider=void 0;var s=n(93),i=r(s),o=null;e.setProvider=function(t){o=t},e["default"]=function(t){return o?o(t):i["default"].get(t)}},function(t,e,n){var r=n(45)("wks"),s=n(33),i=n(8).Symbol,o="function"==typeof i,u=t.exports=function(t){return r[t]||(r[t]=o&&i[t]||(o?i:s)("Symbol."+t))};u.store=r},function(t,e){t.exports=require("debug")},function(t,e,n){"use strict";var r=n(192);r.emitErrs=!0;var s=new r.Logger({transports:[new r.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});t.exports=s,t.exports.stream={write:function(t){s.info(t.replace(/\n$/,""))}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(8),s=n(2),i=n(67),o=n(16),u="prototype",a=function(t,e,n){var c,l,p,f=t&a.F,h=t&a.G,d=t&a.S,g=t&a.P,y=t&a.B,_=t&a.W,m=h?s:s[e]||(s[e]={}),v=m[u],b=h?r:d?r[e]:(r[e]||{})[u];h&&(n=e);for(c in n)l=!f&&b&&void 0!==b[c],l&&c in m||(p=l?b[c]:n[c],m[c]=h&&"function"!=typeof b[c]?n[c]:y&&l?i(p,r):_&&b[c]==p?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(p):g&&"function"==typeof p?i(Function.call,p):p,g&&((m.virtual||(m.virtual={}))[c]=p,t&a.R&&v&&!v[c]&&o(v,c,p)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(14),s=n(69),i=n(47),o=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),s)try{return o(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(70),s=n(38);t.exports=function(t){return r(s(t))}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(12),s=n(31);t.exports=n(9)?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(75),s=n(39);t.exports=Object.keys||function(t){return r(t,s)}},function(t,e){t.exports=require("express")},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e){t.exports=require("bluebird")},function(t,e){t.exports=require("lodash")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.validateHookToken=e.gitlabWebhook=e.errorHandler=e.requireUser=e.dashboardAdmins=void 0;var s=n(104),i=r(s),o=n(107),u=r(o),a=n(105),c=r(a),l=n(106),p=r(l),f=n(108),h=r(f);e.dashboardAdmins=i["default"],e.requireUser=u["default"],e.errorHandler=c["default"],e.gitlabWebhook=p["default"],e.validateHookToken=h["default"]},function(t,e,n){t.exports={"default":n(126),__esModule:!0}},function(t,e,n){t.exports={"default":n(130),__esModule:!0}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(119),i=r(s);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(121),i=r(s),o=n(118),u=r(o),a=n(65),c=r(a);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,u["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i["default"]?(0,i["default"])(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(65),i=r(s);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(38);t.exports=function(t){return Object(r(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=require("path")},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getProjectId=e.getChanges=e.hasChanges=void 0;var i=n(24),o=s(i),u=n(120),a=s(u),c=n(36),l=s(c),p=n(64),f=(s(p),n(22)),h=s(f),d=n(34),g=s(d),y=n(21),_=s(y),m=n(170),v=s(m),b=n(4),j=s(b),w=n(7),x=s(w),P=n(59),I=r(P),E=new v["default"]({url:"https://gitlab.com",token:(0,j["default"])("GITLAB_TOKEN")}),O=function(t){return 0===t.indexOf(I.RULES_DIRECTORY+"/")},T=function(t){return 0===t.indexOf(I.DATABASE_CONNECTIONS_DIRECTORY+"/")},C=function(t){var e=t.split("/");if(3===e.length&&/\.js$/i.test(e[2])){var n=g["default"].parse(e[2]).name;if(I.DATABASE_SCRIPTS.indexOf(n)>-1)return{database:e[1],name:g["default"].parse(n).name}}return null},S=function(t){return/\.(js|json)$/i.test(t)},k=function(t){return/\.(js)$/i.test(t)},L=function(t){if(O(t))return/\.(js|json)$/i.test(t);if(T(t)){var e=C(t);return!!e}return!1},A=(e.hasChanges=function(t){return h["default"].chain(t).map(function(t){return h["default"].union(t.added,t.modified,t.removed)}).flattenDeep().uniq().filter(L).value().length>0},function(t,e){return new _["default"](function(n,r){try{E.projects.repository.listTree(t,{ref_name:e,path:I.RULES_DIRECTORY},function(t){if(!t)return n([]);var e=t.filter(function(t){return"blob"===t.type}).filter(function(t){return S(t.name)});return e.forEach(function(t,n){e[n].path=I.RULES_DIRECTORY+"/"+t.name}),n(e)})}catch(s){r(s)}})}),R=function(t,e,n){return new _["default"](function(r,s){try{E.projects.repository.listTree(t,{ref_name:e,path:I.DATABASE_CONNECTIONS_DIRECTORY+"/"+n},function(t){if(!t)return r([]);var e=t.filter(function(t){return"blob"===t.type}).filter(function(t){return k(t.name)});return e.forEach(function(t,r){e[r].path=I.DATABASE_CONNECTIONS_DIRECTORY+"/"+n+"/"+t.name}),r(e)})}catch(i){s(i)}})},N=function(t,e){return new _["default"](function(n,r){try{E.projects.repository.listTree(t,{ref_name:e,path:I.DATABASE_CONNECTIONS_DIRECTORY},function(r){if(!r)return n([]);var s=r.filter(function(t){return"tree"===t.type}),i=[],o=[];s.forEach(function(n){i.push(R(t,e,n.name).then(function(t){o=o.concat(t)}))}),_["default"].all(i).then(function(){return n(o)})})}catch(s){r(s)}})},M=function(t,e){var n={rules:A(t,e),connections:N(t,e)};return _["default"].props(n).then(function(t){return h["default"].union(t.rules,t.connections)})},U=function(t,e,n){return new _["default"](function(r,s){try{E.projects.repository.showFile(t,{ref:e,file_path:n.path},function(t,e){return t?r({fileName:n.path,contents:new Buffer(t.content,"base64").toString()}):(x["default"].error("Error downloading '"+n.path+"'"),x["default"].error(e),s(new Error("Error downloading '"+n.path+"'")))})}catch(i){s(i)}})},D=function(t,e,n,r){var s=(0,l["default"])({},r,{name:n}),i=[];return r.script&&i.push(U(t,e,r.scriptFile).then(function(t){s.script=t.contents})),r.metadata&&i.push(U(t,e,r.metadataFile).then(function(t){s.metadata=JSON.parse(t.contents)})),_["default"].all(i).then(function(){return s})},q=function(t,e,n){var r={};return h["default"].filter(n,function(t){return O(t.path)}).forEach(function(t){var e=g["default"].parse(t.path).name;r[e]=r[e]||{},/\.js$/i.test(t.name)?(r[e].script=!0,r[e].scriptFile=t):/\.json$/i.test(t.name)&&(r[e].metadata=!0,r[e].metadataFile=t)}),_["default"].map((0,a["default"])(r),function(n){return D(t,e,n,r[n])},{concurrency:2})},B=function(t,e,n,r){var s={name:n,scripts:[]},i=[];return r.forEach(function(n){i.push(U(t,e,n).then(function(t){s.scripts.push({stage:n.name,contents:t.contents})}))}),_["default"].all(i).then(function(){return s})},F=function(t,e,n){var r={};return h["default"].filter(n,function(t){return T(t.path)}).forEach(function(t){var e=C(t.path);e&&(r[e.database]=r[e.database]||[],r[e.database].push((0,l["default"])({},e,{id:t.id,path:t.path})))}),_["default"].map((0,a["default"])(r),function(n){return B(t,e,n,r[n])},{concurrency:2})};e.getChanges=function(t,e){return M(t,e).then(function(n){x["default"].debug("Files in tree: "+(0,o["default"])(n.map(function(t){return{name:t.path,id:t.id}}),null,2));var r={rules:q(t,e,n),databases:F(t,e,n)};return _["default"].props(r).then(function(t){return{rules:t.rules,databases:t.databases}})})},e.getProjectId=function(t){return new _["default"](function(e,n){try{E.projects.all(function(r){if(!r)return n(new Error("Unable to determine project ID"));var s=r.filter(function(e){return e.path_with_namespace===t});return s[0]&&s[0].id?e(s[0].id):n(new Error("Unable to determine project ID"))})}catch(r){n(r)}})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(117),i=r(s);e["default"]=i["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=!0},function(t,e,n){var r=n(14),s=n(146),i=n(39),o=n(44)("IE_PROTO"),u=function(){},a="prototype",c=function(){var t,e=n(68)("iframe"),r=i.length,s="<",o=">";for(e.style.display="none",n(139).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(s+"script"+o+"document.F=Object"+s+"/script"+o),t.close(),c=t.F;r--;)delete c[a][i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[a]=r(t),n=new u,u[a]=null,n[o]=t):n=c(),void 0===e?n:s(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(12).f,s=n(11),i=n(5)("toStringTag");t.exports=function(t,e,n){t&&!s(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(45)("keys"),s=n(33);t.exports=function(t){return r[t]||(r[t]=s(t))}},function(t,e,n){var r=n(8),s="__core-js_shared__",i=r[s]||(r[s]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(19);t.exports=function(t,e){if(!r(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!r(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(8),s=n(2),i=n(40),o=n(49),u=n(12).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:o.f(t)})}},function(t,e,n){e.f=n(5)},function(t,e,n){"use strict";var r=n(149)(!0);n(71)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(155);for(var r=n(8),s=n(16),i=n(20),o=n(5)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],a=0;a<5;a++){var c=u[a],l=r[c],p=l&&l.prototype;p&&!p[o]&&s(p,o,c),i[c]=i.Array}},function(t,e,n){(function(){var e,r,s=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=n(1),r=function(t){function e(){return this.search=s(this.search,this),this.addProject=s(this.addProject,this),this.create=s(this.create,this),this.addMember=s(this.addMember,this),this.listMembers=s(this.listMembers,this),this.listProjects=s(this.listProjects,this),this.show=s(this.show,this),this.all=s(this.all,this),this.init=s(this.init,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.init=function(){return this.access_levels={GUEST:10,REPORTER:20,DEVELOPER:30,MASTER:40,OWNER:50}},e.prototype.all=function(t,e){var n,r;return null==t&&(t={}),null==e&&(e=null),"function"==typeof t&&(e=t,t={}),this.debug("Groups::all()"),null==t.page&&(t.page=1),null==t.per_page&&(t.per_page=100),r=[],n=function(s){return function(i,o){if(i){if(e)return e(o||r)}else{if(o.length===t.per_page)return s.debug("Recurse Groups::all()"),r=r.concat(o),t.page++,s.get("groups",t,n);if(r=r.concat(o),e)return e(r)}}}(this),this.get("groups",t,n)},e.prototype.show=function(t,e){return null==e&&(e=null),this.debug("Groups::show()"),this.get("groups/"+parseInt(t),function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.listProjects=function(t,e){return null==e&&(e=null),this.debug("Groups::listProjects()"),this.get("groups/"+parseInt(t),function(t){return function(t){if(e)return e(t.projects)}}(this))},e.prototype.listMembers=function(t,e){return null==e&&(e=null),this.debug("Groups::listMembers()"),this.get("groups/"+parseInt(t)+"/members",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.addMember=function(t,e,n,r){var s,i;if(null==r&&(r=null),this.debug("addMember("+t+", "+e+", "+n+")"),s=function(t){return function(){var e,r,s;s=t.access_levels;for(r in s)if(e=s[r],n===e)return!0;return!1}}(this),!s())throw"`accessLevel` must be one of "+JSON.stringify(this.access_levels);return i={user_id:e,access_level:n},this.post("groups/"+parseInt(t)+"/members",i,function(t){if(r)return r(t)})},e.prototype.create=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Groups::create()"),this.post("groups",t,function(t){if(e)return e(t)})},e.prototype.addProject=function(t,e,n){return null==n&&(n=null),this.debug("Groups::addProject("+t+", "+e+")"),this.post("groups/"+parseInt(t)+"/projects/"+parseInt(e),null,function(t){if(n)return n(t)})},e.prototype.search=function(t,e){var n;return null==e&&(e=null),this.debug("Groups::search("+t+")"),n={search:t},this.get("groups",n,function(t){if(e)return e(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=n(1),r=function(t){function e(){return this.edit=s(this.edit,this),this.create=s(this.create,this),this.show=s(this.show,this),this.all=s(this.all,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.all=function(t,e){return null==t&&(t={}),null==e&&(e=null),"function"==typeof t&&(e=t,t={}),this.debug("Issues::all()"),null==t.page&&(t.page=1),null==t.per_page&&(t.per_page=100),function(){var n,r;return r=[],n=function(s){return function(i){return i.length===t.per_page?(s.debug("Recurse Issues::all()"),r=r.concat(i),t.page++,s.get("issues",t,n)):(r=r.concat(i),e?e(r):void 0)}}(this),this.get("issues",t,n)}.bind(this)()},e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Issues::show()"),t=t.toString().indexOf("/")!==-1?encodeURIComponent(t):parseInt(t),e=e.toString().indexOf("/")!==-1?encodeURIComponent(e):parseInt(e),this.get("projects/"+t+"/issues/"+e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.create=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("Issues::create()"),t=t.toString().indexOf("/")!==-1?encodeURIComponent(t):parseInt(t),this.post("projects/"+t+"/issues",e,function(t){if(n)return n(t)})},e.prototype.edit=function(t,e,n,r){return null==n&&(n={}),null==r&&(r=null),this.debug("Issues::edit()"),t=t.toString().indexOf("/")!==-1?encodeURIComponent(t):parseInt(t),e=e.toString().indexOf("/")!==-1?encodeURIComponent(e):parseInt(e),this.put("projects/"+t+"/issues/"+e,n,function(t){if(r)return r(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.create=i(this.create,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.create=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("Labels::create()"),this.post("projects/"+s.parseProjectId(t)+"/labels",e,function(t){if(n)return n(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.create=i(this.create,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.create=function(t,e,n,r){return null==n&&(n={}),null==r&&(r=null),this.debug("Notes::create()"),this.post("projects/"+s.parseProjectId(t)+"/issues/"+parseInt(e)+"/notes",n,function(t){if(r)return r(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.listTriggers=i(this.listTriggers,this),this.search=i(this.search,this),this.fork=i(this.fork,this),this.remove=i(this.remove,this),this.listTags=i(this.listTags,this),this.listCommits=i(this.listCommits,this),this.listMembers=i(this.listMembers,this),this.editMember=i(this.editMember,this),this.addMember=i(this.addMember,this),this.edit=i(this.edit,this),this.create_for_user=i(this.create_for_user,this),this.create=i(this.create,this),this.show=i(this.show,this),this.allAdmin=i(this.allAdmin,this),this.all=i(this.all,this),this.init=i(this.init,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.init=function(){return this.members=this.load("ProjectMembers"),this.hooks=this.load("ProjectHooks"),this.issues=this.load("ProjectIssues"),this.labels=this.load("ProjectLabels"),this.repository=this.load("ProjectRepository"),this.milestones=this.load("ProjectMilestones"),this.deploy_keys=this.load("ProjectDeployKeys"),this.merge_requests=this.load("ProjectMergeRequests"),this.services=this.load("ProjectServices"),this.builds=this.load("ProjectBuilds")},e.prototype.all=function(t,e){var n,r;return null==t&&(t={}),null==e&&(e=null),"function"==typeof t&&(e=t,t={}),this.debug("Projects::all()"),null==t.page&&(t.page=1),null==t.per_page&&(t.per_page=100),r=[],n=function(s){return function(i,o){if(i){if(e)return e(o||r)}else{if(o.length===t.per_page)return s.debug("Recurse Projects::all()"),r=r.concat(o),t.page++,s.get("projects",t,n);if(r=r.concat(o),e)return e(r)}}}(this),this.get("projects",t,n)},e.prototype.allAdmin=function(t,e){var n,r;return null==t&&(t={}),null==e&&(e=null),"function"==typeof t&&(e=t,t={}),this.debug("Projects::allAdmin()"),null==t.page&&(t.page=1),null==t.per_page&&(t.per_page=100),r=[],n=function(s){return function(i,o){if(i){if(e)return e(o||r)}else{if(o.length===t.per_page)return s.debug("Recurse Projects::allAdmin()"),r=r.concat(o),t.page++,s.get("projects/all",t,n);if(r=r.concat(o),e)return e(r)}}}(this),this.get("projects/all",t,n)},e.prototype.show=function(t,e){return null==e&&(e=null),this.debug("Projects::show()"),this.get("projects/"+s.parseProjectId(t),function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.create=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::create()"),this.post("projects",t,function(t){if(e)return e(t)})},e.prototype.create_for_user=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::create_for_user()"),this.post("projects/user/"+t.user_id,t,function(t){if(e)return e(t)})},e.prototype.edit=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("Projects::edit()"),this.put("projects/"+s.parseProjectId(t),e,function(t){if(n)return n(t)})},e.prototype.addMember=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::addMember()"),this.post("projects/"+t.id+"/members",t,function(t){if(e)return e(t)})},e.prototype.editMember=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::editMember()"),this.put("projects/"+t.id+"/members/"+t.user_id,t,function(t){if(e)return e(t)})},e.prototype.listMembers=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::listMembers()"),this.get("projects/"+t.id+"/members",function(t){if(e)return e(t)})},e.prototype.listCommits=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::listCommits()"),this.get("projects/"+t.id+"/repository/commits",t,function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.listTags=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::listTags()"),this.get("projects/"+t.id+"/repository/tags",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.remove=function(t,e){return null==e&&(e=null),this.debug("Projects::remove()"),this["delete"]("projects/"+s.parseProjectId(t),function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.fork=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::fork()"),this.post("projects/fork/"+t.id,t,function(t){if(e)return e(t)})},e.prototype.search=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),"function"==typeof e&&(n=e,e={}),this.debug("Projects::search()"),this.get("projects/search/"+t,e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.listTriggers=function(t,e){return null==e&&(e=null),this.debug("Projects::listTriggers()"),this.get("projects/"+s.parseProjectId(t)+"/triggers",function(t){return function(t){if(e)return e(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=n(1),r=function(t){function e(){return this.search=s(this.search,this),this.session=s(this.session,this),this.create=s(this.create,this),this.show=s(this.show,this),this.current=s(this.current,this),this.all=s(this.all,this),this.init=s(this.init,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.init=function(){return this.keys=this.load("UserKeys")},e.prototype.all=function(t,e){var n,r;return null==t&&(t={}),null==e&&(e=null),"function"==typeof t&&(e=t,t={}),this.debug("Users::all()"),null==t.page&&(t.page=1),null==t.per_page&&(t.per_page=100),r=[],n=function(s){return function(i,o){if(i){if(e)return e(o||r)}else{if(o.length===t.per_page)return s.debug("Recurse Users::all()"),r=r.concat(o),t.page++,s.get("users",t,n);if(r=r.concat(o),e)return e(r)}}}(this),this.get("users",t,n)},e.prototype.current=function(t){return null==t&&(t=null),this.debug("Users::current()"),this.get("user",function(e){if(t)return t(e)})},e.prototype.show=function(t,e){return null==e&&(e=null),this.debug("Users::show()"),this.get("users/"+parseInt(t),function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.create=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Users::create()",t),this.post("users",t,function(t){if(e)return e(t)})},e.prototype.session=function(t,e,n){var r;return null==n&&(n=null),this.debug("Users::session()"),r={email:t,password:e},this.post("session",r,function(t){if(n)return n(t)})},e.prototype.search=function(t,e){var n;return null==e&&(e=null),this.debug("Users::search("+t+")"),n={search:t},this.get("users",n,function(t){if(e)return e(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e){t.exports=require("url")},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RULES_DIRECTORY="rules",e.DATABASE_CONNECTIONS_DIRECTORY="database-connections",e.DATABASE_SCRIPTS=["get_user","create","verify","login","change_password","delete"],e.RULES_STAGES=["login_success","login_failure","pre_authorize","user_registration","user_blocked"],e.CONCURRENT_CALLS=5},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=s(i),u=n(24),a=s(u),c=n(4),l=s(c),p=n(7),f=s(p),h=n(98),d=r(h),g=n(109),y=n(35),_=n(63),m=n(62),v=function(t,e,n,r,s){var i=[],o=function(t){i.push({date:new Date,message:t}),f["default"].debug(t)};return{id:t,user:s,sha:r,branch:e,repository:n,date:new Date,connectionsUpdated:0,rulesCreated:0,rulesUpdated:0,rulesDeleted:0,error:null,logs:i,log:o}};e["default"]=function(t,e,n,r,s,i,u){var c=v(e,r,s,i,u),p=void 0;return"manual"===e?(p=i,c.log("Manual deployment triggered.")):(p=r,c.log("Webhook received: "+e+".")),c.log("Loading GitLab tree..."),(0,y.getChanges)(n,p).then(function(t){return c.log("Assets: "+(0,a["default"])((0,o["default"])({id:e,user:u},t),null,2)),c.log("Getting access token for "+(0,l["default"])("AUTH0_CLIENT_ID")+"/"+(0,l["default"])("AUTH0_DOMAIN")),(0,m.getForClient)((0,l["default"])("AUTH0_DOMAIN"),(0,l["default"])("AUTH0_CLIENT_ID"),(0,l["default"])("AUTH0_CLIENT_SECRET")).then(function(e){t.client=e}).then(function(){return d.updateDatabases(c,t.client,t.databases)}).then(function(){return d.deleteRules(c,t.client,t.rules)}).then(function(){return d.updateRules(c,t.client,t.rules)}).then(function(){return c.log("Done.")})}).then(function(){return(0,_.appendProgress)(t,c)}).then(function(){return(0,g.pushToSlack)(c,(0,l["default"])("WT_URL")+"/login")}).then(function(){return{connections:{updated:c.connectionsUpdated},rules:{created:c.rulesCreated,updated:c.rulesUpdated,deleted:c.rulesDeleted}}})["catch"](function(e){throw c.error=e,c.log("Error: "+e.message),c.log("StackTrace: "+e.stack),(0,_.appendProgress)(t,c),(0,g.pushToSlack)(c,(0,l["default"])("WT_URL")+"/login"),e})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ValidationError=e.UnauthorizedError=e.NotFoundError=e.ArgumentError=void 0;var s=n(99),i=r(s),o=n(100),u=r(o),a=n(101),c=r(a),l=n(102),p=r(l);e.ArgumentError=i["default"],e.NotFoundError=u["default"],e.UnauthorizedError=c["default"],e.ValidationError=p["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getForAccessToken=e.getForClient=e.getAccessToken=void 0;var s=n(188),i=r(s),o=n(21),u=r(o),a=n(173),c=r(a),l=n(95),p=r(l),f=n(4),h=r(f),d=n(179);"webtask"===(0,h["default"])("HOSTING_ENV")&&(d=n(181));var g=e.getAccessToken=u["default"].promisify((0,c["default"])({load:function(t,e,n,r){var s={uri:"https://"+t+"/oauth/token",body:{audience:"https://"+t+"/api/v2/",grant_type:"client_credentials",client_id:e,client_secret:n},json:!0};return p["default"].post(s).then(function(t){return r(null,t.access_token)})["catch"](function(t){return r(t)})},hash:function(t,e,n){return t+"/"+e+"/"+n},max:100,maxAge:(0,i["default"])("1h")}));e.getForClient=function(t,e,n){return g(t,e,n).then(function(e){return new d.ManagementClient({domain:t,token:e})})},e.getForAccessToken=function(t,e){return u["default"].resolve(new d.ManagementClient({domain:t,token:e}))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.appendProgress=e.writeStorage=e.readStorage=void 0;var s=n(22),i=r(s),o=n(21),u=r(o),a=n(7),c=r(a),l={},p=e.readStorage=function(t){return t?new u["default"](function(e,n){t.get(function(t,r){if(t)return n(t);var s=r||l;return e(s)})}):(c["default"].debug("Unable to read storage. Context not available."),u["default"].resolve(l))},f=e.writeStorage=function(t,e){return t?new u["default"](function(n,r){t.set(e,{force:1},function(t){return t?r(t):n()})}):(c["default"].debug("Unable to write storage. Context not available."),u["default"].resolve())};e.appendProgress=function(t,e){return p(t).then(function(t){return t.deployments=t.deployments||[],t.deployments.push(e),
t.deployments.length>10&&(t.deployments=i["default"].drop(t.deployments,t.deployments.length-10)),t}).then(function(e){return f(t,e)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(116),i=r(s),o=n(115),u=r(o);e["default"]=function(){function t(t,e){var n=[],r=!0,s=!1,i=void 0;try{for(var o,a=(0,u["default"])(t);!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(c){s=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(s)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i["default"])(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=n(123),i=r(s),o=n(122),u=r(o),a="function"==typeof u["default"]&&"symbol"==typeof i["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof u["default"]&&t.constructor===u["default"]?"symbol":typeof t};e["default"]="function"==typeof u["default"]&&"symbol"===a(i["default"])?function(t){return"undefined"==typeof t?"undefined":a(t)}:function(t){return t&&"function"==typeof u["default"]&&t.constructor===u["default"]?"symbol":"undefined"==typeof t?"undefined":a(t)}},function(t,e,n){var r=n(37),s=n(5)("toStringTag"),i="Arguments"==r(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),s))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){var r=n(135);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,s){return t.call(e,n,r,s)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(19),s=n(8).document,i=r(s)&&r(s.createElement);t.exports=function(t){return i?s.createElement(t):{}}},function(t,e,n){t.exports=!n(9)&&!n(15)(function(){return 7!=Object.defineProperty(n(68)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(37);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(40),s=n(10),i=n(77),o=n(16),u=n(11),a=n(20),c=n(141),l=n(43),p=n(74),f=n(5)("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",g="keys",y="values",_=function(){return this};t.exports=function(t,e,n,m,v,b,j){c(n,e,m);var w,x,P,I=function(t){if(!h&&t in C)return C[t];switch(t){case g:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",O=v==y,T=!1,C=t.prototype,S=C[f]||C[d]||v&&C[v],k=S||I(v),L=v?O?I("entries"):k:void 0,A="Array"==e?C.entries||S:S;if(A&&(P=p(A.call(new t)),P!==Object.prototype&&(l(P,E,!0),r||u(P,f)||o(P,f,_))),O&&S&&S.name!==y&&(T=!0,k=function(){return S.call(this)}),r&&!j||!h&&!T&&C[f]||o(C,f,k),a[e]=k,a[E]=_,v)if(w={values:O?k:I(y),keys:b?k:I(g),entries:L},j)for(x in w)x in C||i(C,x,w[x]);else s(s.P+s.F*(h||T),e,w);return w}},function(t,e,n){var r=n(30),s=n(31),i=n(13),o=n(47),u=n(11),a=n(69),c=Object.getOwnPropertyDescriptor;e.f=n(9)?c:function(t,e){if(t=i(t),e=o(e,!0),a)try{return c(t,e)}catch(n){}if(u(t,e))return s(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(75),s=n(39).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},function(t,e,n){var r=n(11),s=n(32),i=n(44)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var r=n(11),s=n(13),i=n(137)(!1),o=n(44)("IE_PROTO");t.exports=function(t,e){var n,u=s(t),a=0,c=[];for(n in u)n!=o&&r(u,n)&&c.push(n);for(;e.length>a;)r(u,n=e[a++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(10),s=n(2),i=n(15);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},function(t,e,n){t.exports=n(16)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.all=i(this.all,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.all=function(t,e,n,r){var i,o;return null==n&&(n={}),null==r&&(r=null),this.debug("IssueNotes::notes()"),"function"==typeof n&&(r=n,n={}),null==n.page&&(n.page=1),null==n.per_page&&(n.per_page=100),o=[],i=function(u){return function(a,c){if(a){if(r)return r(o)}else{if(c.length===n.per_page)return u.debug("Recurse IssueNotes::all()"),o=o.concat(c),n.page++,u.get("projects/"+s.parseProjectId(t)+"/issues/"+parseInt(e)+"/notes",n,i);if(o=o.concat(c),r)return r(o)}}}(this),this.get("projects/"+s.parseProjectId(t)+"/issues/"+parseInt(e)+"/notes",n,i)},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.triggerBuild=i(this.triggerBuild,this),this.showBuild=i(this.showBuild,this),this.listBuilds=i(this.listBuilds,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.listBuilds=function(t,e){return null==e&&(e=null),this.debug("Projects::listBuilds()"),this.get("projects/"+s.parseProjectId(t)+"/builds",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.showBuild=function(t,e,n){return null==n&&(n=null),this.debug("Projects::build()"),this.get("projects/"+s.parseProjectId(t)+"/builds/"+e,null,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.triggerBuild=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::triggerBuild()"),this.post("projects/"+s.parseProjectId(t.projectId)+"/trigger/builds",t,null,function(t){return function(t){if(e)return e(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.addKey=i(this.addKey,this),this.getKey=i(this.getKey,this),this.listKeys=i(this.listKeys,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.listKeys=function(t,e){return null==e&&(e=null),this.debug("ProjectKeys::listKeys()"),this.get("projects/"+s.parseProjectId(t)+"/keys",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.getKey=function(t,e,n){return null==n&&(n=null),this.debug("ProjectKeys::getKey()"),this.get("projects/"+s.parseProjectId(t)+"/keys/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.addKey=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("ProjectKeys::addKey()"),this.post("projects/"+s.parseProjectId(t)+"/keys",e,function(t){return function(t){if(n)return n(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.remove=i(this.remove,this),this.update=i(this.update,this),this.add=i(this.add,this),this.show=i(this.show,this),this.list=i(this.list,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.list=function(t,e){return null==e&&(e=null),this.debug("Projects::hooks()"),this.get("projects/"+s.parseProjectId(t)+"/hooks",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Projects::hook()"),this.get("projects/"+s.parseProjectId(t)+"/hooks/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.add=function(t,e,n){return null==n&&(n=null),"string"==typeof e&&(e={url:e}),this.debug("Projects::addHook()"),this.post("projects/"+s.parseProjectId(t)+"/hooks",e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.update=function(t,e,n,r){var i;return null==r&&(r=null),this.debug("Projects::saveHook()"),i={access_level:parseInt(accessLevel)},this.put("projects/"+s.parseProjectId(t)+"/hooks/"+parseInt(e),i,function(t){return function(t){if(r)return r(t)}}(this))},e.prototype.remove=function(t,e,n){return null==n&&(n=null),this.debug("Projects::removeHook()"),this["delete"]("projects/"+s.parseProjectId(t)+"/hooks/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.list=i(this.list,this),this.init=i(this.init,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.init=function(){return this.notes=this.load("IssueNotes")},e.prototype.list=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("ProjectIssues::issues()"),"function"==typeof e&&(n=e,e={}),null==e.page&&(e.page=1),null==e.per_page&&(e.per_page=100),function(){var r,i;return i=[],r=function(o){return function(u,a){return u&&n?n(i):a.length===e.per_page?(o.debug("Recurse ProjectIssues::list()"),i=i.concat(a),e.page++,o.get("projects/"+s.parseProjectId(t)+"/issues",e,r)):(i=i.concat(a),n?n(i):void 0)}}(this),this.get("projects/"+s.parseProjectId(t)+"/issues",e,r)}.bind(this)()},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.all=i(this.all,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.all=function(t,e,n){var r,i;return null==e&&(e={}),null==n&&(n=null),this.debug("ProjectLabels::labels()"),"function"==typeof e&&(n=e,e={}),null==e.page&&(e.page=1),null==e.per_page&&(e.per_page=100),i=[],r=function(o){return function(u,a){if(u){if(n)return n(i)}else{if(a.length===e.per_page)return o.debug("Recurse ProjectLabels::all()"),i=i.concat(a),e.page++,o.get("projects/"+s.parseProjectId(t)+"/labels",e,r);if(i=i.concat(a),n)return n(i)}}}(this),this.get("projects/"+s.parseProjectId(t)+"/labels",e,r)},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.remove=i(this.remove,this),this.update=i(this.update,this),this.add=i(this.add,this),this.show=i(this.show,this),this.list=i(this.list,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.list=function(t,e){return null==e&&(e=null),this.debug("Projects::members()"),this.get("projects/"+s.parseProjectId(t)+"/members",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Projects::member()"),this.get("projects/"+s.parseProjectId(t)+"/members/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.add=function(t,e,n,r){var i;return null==n&&(n=30),null==r&&(r=null),this.debug("Projects::addMember()"),i={user_id:parseInt(e),access_level:parseInt(n)},this.post("projects/"+s.parseProjectId(t)+"/members",i,function(t){return function(t){if(r)return r(t)}}(this))},e.prototype.update=function(t,e,n,r){var i;return null==n&&(n=30),null==r&&(r=null),this.debug("Projects::saveMember()"),i={access_level:parseInt(n)},this.put("projects/"+s.parseProjectId(t)+"/members/"+parseInt(e),i,function(t){return function(t){if(r)return r(t)}}(this))},e.prototype.remove=function(t,e,n){return null==n&&(n=null),this.debug("Projects::removeMember()"),this["delete"]("projects/"+s.parseProjectId(t)+"/members/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.comment=i(this.comment,this),this.update=i(this.update,this),this.add=i(this.add,this),this.show=i(this.show,this),this.list=i(this.list,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.list=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),"function"==typeof e&&(n=e,e={}),null==e.page&&(e.page=1),null==e.per_page&&(e.per_page=100),this.debug("Projects::mergerequests()"),this.get("projects/"+s.parseProjectId(t)+"/merge_requests",e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Projects::mergerequest()"),this.get("projects/"+s.parseProjectId(t)+"/merge_request/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.add=function(t,e,n,r,i,o){var u;return null==o&&(o=null),this.debug("Projects::addMergeRequest()"),u={id:s.parseProjectId(t),source_branch:e,target_branch:n,title:i},void 0!==r&&(u.assigneeId=parseInt(r)),this.post("projects/"+s.parseProjectId(t)+"/merge_requests",u,function(t){return function(t){if(o)return o(t)}}(this))},e.prototype.update=function(t,e,n,r){return null==r&&(r=null),this.debug("Projects::saveMergeRequest()"),n.id=s.parseProjectId(t),n.merge_request_id=parseInt(e),this.put("projects/"+s.parseProjectId(t)+"/merge_request/"+parseInt(e),n,function(t){return function(t){if(r)return r(t)}}(this))},e.prototype.comment=function(t,e,n,r){var i;return null==r&&(r=null),this.debug("Projects::commentMergeRequest()"),i={id:s.parseProjectId(t),merge_request_id:parseInt(e),note:n},this.post("projects/"+s.parseProjectId(t)+"/merge_request/"+parseInt(e)+"/comments",i,function(t){return function(t){if(r)return r(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.update=i(this.update,this),this.add=i(this.add,this),this.show=i(this.show,this),this.all=i(this.all,this),e.__super__.constructor.apply(this,arguments)}var n;return o(e,t),n=function(t,e){return null==e&&(e=null),console.log("DEPRECATED: milestone.list. Use milestone.all instead"),this.all.apply(this,arguments)},e.prototype.all=function(t,e){var n,r,i;return null==e&&(e=null),this.debug("Projects::Milestones::all()"),i={},null==i.page&&(i.page=1),null==i.per_page&&(i.per_page=100),r=[],n=function(o){return function(u,a){if(u){if(e)return e(a||r)}else{if(a.length===i.per_page)return o.debug("Recurse Projects::Milestones::all()"),r=r.concat(a),i.page++,o.get("projects/"+s.parseProjectId(t)+"/milestones",i,n);if(r=r.concat(a),e)return e(r)}}}(this),this.get("projects/"+s.parseProjectId(t)+"/milestones",i,n)},e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Projects::milestone()"),this.get("projects/"+s.parseProjectId(t)+"/milestones/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.add=function(t,e,n,r,i){var o;return null==i&&(i=null),this.debug("Projects::addMilestone()"),o={id:s.parseProjectId(t),title:e,description:n,due_date:r},this.post("projects/"+s.parseProjectId(t)+"/milestones",o,function(t){return function(t){if(i)return i(t)}}(this))},e.prototype.update=function(t,e,n,r,i,o,u){var a;return null==u&&(u=null),this.debug("Projects::editMilestone()"),a={id:s.parseProjectId(t),title:n,description:r,due_date:i,state_event:o},this.put("projects/"+s.parseProjectId(t)+"/milestones/"+parseInt(e),a,function(t){return function(t){if(u)return u(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.compare=i(this.compare,this),this.updateFile=i(this.updateFile,this),this.createFile=i(this.createFile,this),this.showFile=i(this.showFile,this),this.listTree=i(this.listTree,this),this.diffCommit=i(this.diffCommit,this),this.showCommit=i(this.showCommit,this),this.listCommits=i(this.listCommits,this),this.listTags=i(this.listTags,this),this.addTag=i(this.addTag,this),this.deleteBranch=i(this.deleteBranch,this),this.createBranch=i(this.createBranch,this),this.unprotectBranch=i(this.unprotectBranch,this),this.protectBranch=i(this.protectBranch,this),this.showBranch=i(this.showBranch,this),this.listBranches=i(this.listBranches,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.listBranches=function(t,e){return null==e&&(e=null),this.debug("Projects::listBranches()"),this.get("projects/"+s.parseProjectId(t)+"/repository/branches",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.showBranch=function(t,e,n){return null==n&&(n=null),this.debug("Projects::branch()"),this.get("projects/"+s.parseProjectId(t)+"/repository/branches/"+encodeURI(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.protectBranch=function(t,e,n){return null==n&&(n=null),this.debug("Projects::protectBranch()"),this.put("projects/"+s.parseProjectId(t)+"/repository/branches/"+encodeURI(e)+"/protect",null,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.unprotectBranch=function(t,e,n){return null==n&&(n=null),this.debug("Projects::unprotectBranch()"),this.put("projects/"+s.parseProjectId(t)+"/repository/branches/"+encodeURI(e)+"/unprotect",null,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.createBranch=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::createBranch()",t),this.post("projects/"+s.parseProjectId(t.projectId)+"/repository/branches",t,function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.deleteBranch=function(t,e,n){return null==n&&(n=null),this.debug("Projects::deleteBranch()"),this["delete"]("projects/"+s.parseProjectId(t)+"/repository/branches/"+encodeURI(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.addTag=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::addTag()"),this.post("projects/"+s.parseProjectId(t.id)+"/repository/tags",t,function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.listTags=function(t,e){return null==e&&(e=null),this.debug("Projects::listTags()"),this.get("projects/"+s.parseProjectId(t)+"/repository/tags",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.listCommits=function(t,e){return null==e&&(e=null),this.debug("Projects::listCommits()"),this.get("projects/"+s.parseProjectId(t)+"/repository/commits",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.showCommit=function(t,e,n){return null==n&&(n=null),this.debug("Projects::commit()"),this.get("projects/"+s.parseProjectId(t)+"/repository/branches/"+parseInt(e),function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.diffCommit=function(t,e,n){return null==n&&(n=null),this.debug("Projects::diffCommit()"),this.get("projects/"+s.parseProjectId(t)+"/repository/commits/"+e+"/diff",function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.listTree=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),this.debug("Projects::listTree()"),"function"==typeof e&&(n=e,e={}),this.get("projects/"+s.parseProjectId(t)+"/repository/tree",e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.showFile=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),"function"==typeof e?(n=e,e=t):e.projectId=t,this.debug("Projects::showFile()",e),e.file_path&&e.ref?this.get("projects/"+s.parseProjectId(e.projectId)+"/repository/files",e,function(t){return function(t){if(n)return n(t)}}(this)):e.file_path&&e.file_id?this.get("projects/"+s.parseProjectId(e.projectId)+"/repository/raw_blobs/"+e.file_id,e,function(t){return function(t){if(n)return n(t)}}(this)):void 0},e.prototype.createFile=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::createFile()",t),this.post("projects/"+s.parseProjectId(t.projectId)+"/repository/files",t,function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.updateFile=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::updateFile()",t),this.put("projects/"+s.parseProjectId(t.projectId)+"/repository/files",t,function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.compare=function(t,e){return null==t&&(t={}),null==e&&(e=null),this.debug("Projects::compare()",t),this.get("projects/"+s.parseProjectId(t.projectId)+"/repository/compare",t,function(t){return function(t){if(e)return e(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;e=n(1),s=n(3),r=function(t){function e(){return this.remove=i(this.remove,this),this.update=i(this.update,this),this.show=i(this.show,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.show=function(t,e,n){return null==n&&(n=null),this.debug("Projects::showService()"),this.get("projects/"+s.parseProjectId(t)+"/services/"+e,function(t){return function(t){if(n)return n(t)}}(this))},e.prototype.update=function(t,e,n,r){return null==r&&(r=null),this.debug("Projects::updateService()"),this.put("projects/"+s.parseProjectId(t)+"/services/"+e,n,function(t){return function(t){if(r)return r(t)}}(this))},e.prototype.remove=function(t,e,n){return null==n&&(n=null),this.debug("Projects:removeService()"),this["delete"]("projects/"+s.parseProjectId(t)+"/services/"+e,function(t){return function(t){if(n)return n(t)}}(this))},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e,n){(function(){var e,r,s=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=n(1),r=function(t){function e(){return this.addKey=s(this.addKey,this),this.all=s(this.all,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.all=function(t,e){return null==e&&(e=null),this.get("users/"+parseInt(t)+"/keys",function(t){return function(t){if(e)return e(t)}}(this))},e.prototype.addKey=function(t,e,n,r){var s;return null==r&&(r=null),s={title:e,key:n},this.post("users/"+t+"/keys",s,function(t){if(r)return r(t)})},e}(e),t.exports=function(t){return new r(t)}}).call(this)},function(t,e){t.exports=require("body-parser")},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("jsonwebtoken")},function(t,e){t.exports=require("nconf")},function(t,e){t.exports=require("querystring")},function(t,e){t.exports=require("request-promise")},function(t,e,n){function r(t){return t&&"[object Function]"==d.call(t)}function s(t){return function(e,n,r){h.get(t+"/userinfo").set("Authorization","Bearer "+e.body.access_token).end(function(t,s){return t?void n.redirect(n.locals.baseUrl):(e.userInfo=s.body,void r())})}}function i(t,e){return function(n,s,i){var o=t;r(t)&&(o=t(n)),n.apiToken=f.sign(n.userInfo,o,{algorithm:"HS256",issuer:s.locals.baseUrl,expiresIn:e}),delete n.userinfo,i()}}var o=n(18),u=n(185),a=n(184),c=n(58),l=n(180),p=n(90),f=n(92),h=n(190),d={}.toString;t.exports=function(t){var e=864e5,r=o.Router(),f=function(t,e,n){n()},h=[f];return t=t||{},t.clientName=t.clientName||"Auth0 Extension",t.clientId=t.clientId,t.exp=t.exp||e,t.credentialsRequired="undefined"!=typeof t.credentialsRequired&&t.credentialsRequired,t.scopes=t.scopes+" openid profile",t.responseType=t.responseType||"token",t.tokenExpiresIn=t.tokenExpiresIn||"10h",t.rootTenantAuthority=t.rootTenantAuthority||"https://auth0.auth0.com",t.authenticatedCallback=t.authenticatedCallback||function(t,e,n,r){r()},t.apiToken&&!t.apiToken.secret&&(console.log('You are using a "development secret" for API token generation. Please setup your secret on "apiToken.secret".'),t.apiToken.secret=n(182).randomBytes(32).toString("hex")),t.apiToken&&t.apiToken.secret&&(h=[s(t.rootTenantAuthority),t.apiToken.payload||f,i(t.apiToken.secret,t.tokenExpiresIn)]),r.use(function(t,e,n){var r="https",s=c.parse(t.originalUrl).pathname.replace(t.path,"");e.locals.baseUrl=c.format({protocol:r,host:t.get("host"),pathname:s}),n()}),r.use(p.urlencoded({extended:!1})),r.use(a({secret:l(),algorithms:["RS256"],credentialsRequired:t.credentialsRequired}).unless({path:["/login","/callback"]})),r.get("/login",function(e,n){var r=n.locals.baseUrl+"/callback";e.query.returnTo&&(r+="?returnTo="+encodeURIComponent(e.query.returnTo));var s;if("string"==typeof t.audience)s="&audience="+encodeURIComponent(t.audience);else if("function"==typeof t.audience){var i=t.audience(e);"string"==typeof i&&(s="&audience="+encodeURIComponent(i))}var o=[t.rootTenantAuthority+"/i/oauth2/authorize","?client_id="+(t.clientId||n.locals.baseUrl),"&response_type="+t.responseType,"&response_mode=form_post","&scope="+encodeURIComponent(t.scopes),"&expiration="+t.exp,"&redirect_uri="+r,s].join("");n.redirect(o)}),r.get("/logout",function(e,n){var r=["html","  head","    script.","      sessionStorage.removeItem('token')","      sessionStorage.removeItem('apiToken')","      window.location.href = '"+t.rootTenantAuthority+"/v2/logout?returnTo=#{baseUrl}';","  body"].join("\n"),s=u.compile(r)({baseUrl:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(s)}),r.post("/callback",h,function(e,n){t.authenticatedCallback(e,n,e.body.access_token,function(t){if(t)return n.sendStatus(500);var r=["html","  head","    script.","      sessionStorage.setItem('token', '"+e.body.access_token+"');",1===h.length?"":"      sessionStorage.setItem('apiToken', '"+e.apiToken+"');","      window.location.href = '#{returnTo}';","  body"].join("\n"),s=u.compile(r)({returnTo:e.query.returnTo?e.query.returnTo:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(s)})}),r.get("/.well-known/oauth2-client-configuration",function(e,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[n.locals.baseUrl+"/callback"],client_name:t.clientName,post_logout_redirect_uris:[n.locals.baseUrl]})}),r}},function(t,e,n){(function(e){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function s(t){return t&&t.__esModule?t:{"default":t}}var i=n(34),o=s(i),u=n(187),a=s(u),c=n(18),l=s(c),p=n(90),f=s(p),h=n(112),d=s(h),g=n(7),y=s(g),_=n(23),m=r(_);t.exports=function(t){var n=new l["default"];return n.use((0,a["default"])(":method :url :status :response-time ms - :res[content-length]",{stream:y["default"].stream})),n.use(f["default"].json({verify:function(t,e,n,r){n&&n.length&&(t.rawBody=n.toString(r||"utf8"))}})),n.use(f["default"].urlencoded({extended:!1})),n.use("/app",l["default"]["static"](o["default"].join(e,"../dist"))),n.use("/",(0,d["default"])(t)),n.use(m.errorHandler),n}}).call(e,"/")},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateRules=e.deleteRules=e.updateDatabases=void 0;var i=n(36),o=s(i),u=n(24),a=s(u),c=n(22),l=s(c),p=n(21),f=s(p),h=n(59),d=r(h),g=function(t,e){var n=e.map(function(t){return t.name});return t.connections.getAll({strategy:"auth0"}).then(function(t){return t.filter(function(t){return n.indexOf(t.name)>-1})})},y=function(t,e,n,r){t.log("Processing connection '"+r.name+"'");var s=l["default"].find(n,{name:r.name});if(!s)throw new Error("Unable to find connection named: '"+r.name+"'");var i=s.options||{};return i.customScripts={},d.DATABASE_SCRIPTS.forEach(function(t){i.customScripts[t]=null}),r.scripts.forEach(function(t){i.customScripts[t.stage]=t.contents}),t.connectionsUpdated++,t.log("Updating database "+s.id+": "+(0,a["default"])(i,null,2)),e.connections.update({id:s.id},{options:i})},_=(e.updateDatabases=function(t,e,n){return 0===n.length?f["default"].resolve(!0):g(e,n).then(function(r){return f["default"].map(n,function(n){return y(t,e,r,n)},{concurrency:d.CONCURRENT_CALLS})})},function(t){return f["default"].all(d.RULES_STAGES.map(function(e){return t.rules.getAll({stage:e})})).then(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return l["default"].chain(e).flattenDeep().union().value()})}),m=function(t,e,n,r){var s=l["default"].find(n,{name:r.name});return s?null:(t.rulesDeleted++,t.log("Deleting rule "+r.name+" ("+r.id+")"),e.rules["delete"]({id:r.id}))},v=(e.deleteRules=function(t,e,n){return t.log("Deleting rules that no longer exist in the repository..."),_(e).then(function(r){return t.log("Existing rules: "+(0,a["default"])(r.map(function(t){return{id:t.id,name:t.name,stage:t.stage,order:t.order}}),null,2)),f["default"].map(r,function(r){return m(t,e,n,r)},{concurrency:d.CONCURRENT_CALLS})})},function(t,e,n,r,s){t.log("Processing rule '"+r+"'");var i=l["default"].find(n,{name:r});if(!i){var u=(0,o["default"])({enabled:!0,stage:"login_success"},s.metadata,{name:r,script:s.script});return t.rulesCreated++,t.log("Creating rule "+r+": "+(0,a["default"])(u,null,2)),e.rules.create(u)}var c=(0,o["default"])({},s.metadata,{script:s.script||i.script});return delete c.stage,t.rulesUpdated++,t.log("Updating rule "+r+" ("+i.id+"): "+(0,a["default"])(c,null,2)),e.rules.update({id:i.id},c)});e.updateRules=function(t,e,n){return 0===n.length?f["default"].resolve(!0):(t.log("Updating rules..."),_(e).then(function(r){return t.log("Existing rules: "+(0,a["default"])(r.map(function(t){return{id:t.id,
name:t.name,stage:t.stage,order:t.order}}),null,2)),f["default"].map(n,function(n){return v(t,e,r,n.name,n)},{concurrency:d.CONCURRENT_CALLS})}))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(25),i=r(s),o=n(26),u=r(o),a=n(27),c=r(a),l=n(29),p=r(l),f=n(28),h=r(f),d=function(t){function e(t){(0,u["default"])(this,e);var n=(0,p["default"])(this,(0,i["default"])(e).call(this,t));return Error.captureStackTrace(n,n.constructor),n.message=t,n.name="ArgumentError",n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"toString",value:function(){return"ArgumentError"}}]),e}(Error);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(25),i=r(s),o=n(26),u=r(o),a=n(27),c=r(a),l=n(29),p=r(l),f=n(28),h=r(f),d=function(t){function e(t){(0,u["default"])(this,e);var n=(0,p["default"])(this,(0,i["default"])(e).call(this,t));return Error.captureStackTrace(n,n.constructor),n.message=t,n.statusCode=404,n.name="NotFoundError",n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"toString",value:function(){return"NotFoundError"}}]),e}(Error);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(25),i=r(s),o=n(26),u=r(o),a=n(27),c=r(a),l=n(29),p=r(l),f=n(28),h=r(f),d=function(t){function e(t){(0,u["default"])(this,e);var n=(0,p["default"])(this,(0,i["default"])(e).call(this,t));return Error.captureStackTrace(n,n.constructor),n.message=t,n.statusCode=401,n.name="UnauthorizedError",n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"toString",value:function(){return"UnauthorizedError"}}]),e}(Error);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(25),i=r(s),o=n(26),u=r(o),a=n(27),c=r(a),l=n(29),p=r(l),f=n(28),h=r(f),d=function(t){function e(t){(0,u["default"])(this,e);var n=(0,p["default"])(this,(0,i["default"])(e).call(this,t));return Error.captureStackTrace(n,n.constructor),n.message=t,n.name="ValidationError",n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"toString",value:function(){return"ValidationError"}}]),e}(Error);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(35),i=n(60),o=r(i);e["default"]=function(t,e,n,r,i,u){return(0,s.getProjectId)(r).then(function(s){return(0,o["default"])(t,e,s,n,r,i,u)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(58),i=r(s),o=n(96),u=r(o),a=n(4),c=r(a);e["default"]=function(){var t={credentialsRequired:!1,clientName:"GitLab Deployments",audience:function(){return"https://"+(0,c["default"])("AUTH0_DOMAIN")+"/api/v2/"}},e=(0,u["default"])(t);return function(n,r,s){var o="https",u=i["default"].parse(n.originalUrl).pathname.replace(n.path,""),a=i["default"].format({protocol:o,host:n.get("host"),pathname:u});return t.clientId=a,e(n,r,s)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var s=n(7),i=r(s);t.exports=function(t,e,n,r){return i["default"].error(t),t&&"NotFoundError"===t.name?(n.status(404),n.json({error:t.message})):t&&"ValidationError"===t.name?(n.status(400),n.json({error:t.message})):(n.status(t.statusCode||500),void n.json({message:t.message}))}},function(t,e,n){"use strict";var r=n(61),s=function(t,e){var n=e.ref,r=void 0===n?"":n,s=e.commits,i=void 0===s?[]:s,o=e.project,u=void 0===o?{}:o,a=e.project_id,c=void 0===a?"":a,l=e.user_email,p=void 0===l?"":l,f=e.event_name,h=void 0===f?"":f,d=e.checkout_sha,g=void 0===d?"":d,y=r.split("/");return{id:g,project_id:c,event:h,branch:3===y.length?y[2]:"",commits:i,repository:u.path_with_namespace,user:p,sha:g}};t.exports=function(t){return function(e,n,i){return t&&0!==t.length?e.headers["x-gitlab-event"]?t!==e.headers["x-gitlab-token"]?i(new r.UnauthorizedError("The GitLab webhook secret is incorrect.")):(e.webhook=s(e.headers,e.body),i()):i(new r.ArgumentError("The GitLab event name is missing.")):i(new r.UnauthorizedError("The extension secret is not set, unable to verify webhook signature."))}}},function(t,e,n){"use strict";var r=n(61);t.exports=function(t,e,n){return t.user?n():n(new r.UnauthorizedError("Authentication required for this endpoint."))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var s=n(34),i=(r(s),n(92)),o=r(i),u=n(4),a=r(u),c=n(7),l=r(c);t.exports=function(t){return function(e,n,r){if(e.headers.authorization&&"Bearer"===e.headers.authorization.split(" ")[0]){var s=e.headers.authorization.split(" ")[1];l["default"].debug("Extension Hook validation token:",s);var i=o["default"].verify(s,(0,a["default"])("EXTENSION_SECRET"),{audience:""+(0,a["default"])("WT_URL")+t,issuer:"https://"+(0,a["default"])("AUTH0_DOMAIN")});return i?r():(l["default"].error("Invalid hook token:",s),n.sendStatus(401))}return l["default"].error("Hook token is missing."),n.sendStatus(401)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.pushToSlack=void 0;var s=n(24),i=r(s),o=n(21),u=r(o),a=n(95),c=r(a),l=n(4),p=r(l),f=function(t,e){var n={username:"auth0-deployments",icon_emoji:":rocket:",attachments:[]},r="(<"+e+"|Details>)";if(t.error)n.attachments.push({color:"#F35A00",fallback:"GitLab to Auth0 Deployment failed: "+t.error.message,text:"GitLab to Auth0 Deployment failed "+r,fields:[{title:"Repository",value:t.repository,"short":!0},{title:"Branch",value:t.branch,"short":!0},{title:"ID",value:t.id,"short":!0},{title:"Error",value:t.error.message,"short":!1}]});else{var s=[{title:"Repository",value:t.repository,"short":!0},{title:"Branch",value:t.branch,"short":!0},{title:"ID",value:t.id,"short":!0},{title:"Commit",value:"<https://gitlab.com/"+t.repository+"/commit/"+t.sha+"|"+t.sha+">","short":!0}];t.connectionsUpdated&&s.push({title:"Connections Updated",value:t.connectionsUpdated,"short":!0}),t.rulesCreated&&s.push({title:"Rules Created",value:t.rulesCreated,"short":!0}),t.rulesUpdated&&s.push({title:"Rules Updated",value:t.rulesUpdated,"short":!0}),t.rulesDeleted&&s.push({title:"Rules Deleted",value:t.rulesDeleted,"short":!0}),n.attachments.push({color:"#7CD197",fallback:"GitLab to Auth0 Deployment",text:"GitLab to Auth0 Deployment "+r,fields:s})}return n};e.pushToSlack=function(t,e){if(!(0,p["default"])("SLACK_INCOMING_WEBHOOK_URL"))return u["default"].resolve();t.log("Sending progress to Slack.");var n=f(t,e);return(0,c["default"])({uri:(0,p["default"])("SLACK_INCOMING_WEBHOOK_URL"),method:"POST",form:{payload:(0,i["default"])(n)}})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),i=n(4),o=r(i),u=n(7),a=r(u),c=n(62),l=n(23);e["default"]=function(){var t=(0,s.Router)();return t.use("/on-uninstall",(0,l.validateHookToken)("/.extensions/on-uninstall")),t["delete"]("/on-uninstall",function(t,e){a["default"].debug("Uninstall running..."),(0,c.getForClient)((0,o["default"])("AUTH0_DOMAIN"),(0,o["default"])("AUTH0_CLIENT_ID"),(0,o["default"])("AUTH0_CLIENT_SECRET")).then(function(t){return t.clients["delete"]({client_id:(0,o["default"])("AUTH0_CLIENT_ID")})}).then(function(){a["default"].debug("Deleted client "+(0,o["default"])("AUTH0_CLIENT_ID")),e.sendStatus(204)})["catch"](function(t){a["default"].debug("Error deleting client "+(0,o["default"])("AUTH0_CLIENT_ID")),a["default"].error(t),e.sendStatus(500)})}),t}},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(91),i=r(s),o=n(58),u=r(o),a=n(183),c=r(a),l=n(34),p=r(l),f=n(4),h=r(f);e["default"]=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title>Auth0 - GitLab Deployments</title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1715/css/index.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.css">\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>"><% } %>\n    <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//3d1e5614.ngrok.io/app/auth0-gitlab-deploy.ui.<%= assets.version %>.css"><% } %>\n  </head>\n  <body class="a0-extension">\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/js/lock-9.0.min.js"></script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1715/js/bundle.js"></script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;</script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"></script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"></script><% } %>\n    <% if (assets.version) { %>\n    <script type="text/javascript" src="//3d1e5614.ngrok.io/app/auth0-gitlab-deploy.ui.vendors.<%= assets.version %>.js"></script>\n    <script type="text/javascript" src="//3d1e5614.ngrok.io/app/auth0-gitlab-deploy.ui.<%= assets.version %>.js"></script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(n,r){var s={AUTH0_DOMAIN:(0,h["default"])("AUTH0_DOMAIN"),BASE_URL:u["default"].format({protocol:"production"!==(0,h["default"])("NODE_ENV")?"http":"https",host:n.get("host"),pathname:u["default"].parse(n.originalUrl||"").pathname.replace(n.path,"")}),BASE_PATH:u["default"].parse(n.originalUrl||"").pathname.replace(n.path,"")+("/admins"===n.path?"/admins":"")},o=(0,h["default"])("CLIENT_VERSION");return o?r.send(c["default"].render(e,{config:s,assets:{version:o}})):i["default"].readFile(p["default"].join(t,"../../dist/manifest.json"),"utf8",function(t,n){var i={config:s,assets:{app:"bundle.js"}};!t&&n&&(i.assets=JSON.parse(n)),r.send(c["default"].render(e,i))})}}}).call(e,"/")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(64),i=r(s),o=n(22),u=r(o),a=n(18),c=n(111),l=r(c),p=n(113),f=r(p),h=n(110),d=r(h),g=n(114),y=r(g),_=n(4),m=r(_),v=n(103),b=r(v),j=n(63),w=n(23),x=function(){var t=(0,m["default"])("GITLAB_REPOSITORY"),e=t.split("/");if(5===e.length){var n=(0,i["default"])(e,5),r=n[3],s=n[4];return r+"/"+s}return t};e["default"]=function(t){var e=(0,a.Router)();return e.use("/.extensions",(0,d["default"])()),e.use("/",(0,w.dashboardAdmins)()),e.get("/",(0,l["default"])()),e.use("/meta",(0,f["default"])()),e.use("/webhooks",(0,y["default"])(t)),e.get("/api/config",w.requireUser,function(t,e){e.json({secret:(0,m["default"])("EXTENSION_SECRET"),branch:(0,m["default"])("GITLAB_BRANCH"),repository:x()})}),e.get("/api/deployments",w.requireUser,function(e,n,r){return(0,j.readStorage)(t).then(function(t){return n.json(u["default"].sortByOrder(t.deployments||[],["date"],[!1]))})["catch"](r)}),e.post("/api/deployments",w.requireUser,function(e,n,r){(0,b["default"])(t,"manual",(0,m["default"])("GITLAB_BRANCH"),x(),e.body&&e.body.sha||(0,m["default"])("GITLAB_BRANCH"),e.user.sub).then(function(t){return n.json(t)})["catch"](r)}),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),i=r(s),o=n(172),u=r(o);e["default"]=function(){var t=i["default"].Router();return t.get("/",function(t,e){e.status(200).send(u["default"])}),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),i=r(s),o=n(4),u=r(o),a=n(60),c=r(a),l=n(35),p=n(23);e["default"]=function(t){var e=(0,u["default"])("GITLAB_BRANCH"),n=(0,u["default"])("EXTENSION_SECRET"),r=i["default"].Router();return r.post("/deploy",(0,p.gitlabWebhook)(n),function(n,r,s){var i=n.webhook,o=i.id,u=i.project_id,a=i.branch,p=i.commits,f=i.repository,h=i.user,d=i.sha;return"push"!==n.webhook.event?r.status(202).json({message:"Request ignored, the '"+n.webhook.event+"' event is not supported."}):a!==e?r.status(202).json({message:"Request ignored, '"+a+"' is not the active branch."}):(0,l.hasChanges)(p)?(0,c["default"])(t,o,u,a,f,d,h).then(function(t){return r.status(200).json(t)})["catch"](s):r.status(202).json({message:"Request ignored, none of the Rules or Database Connection scripts were changed."})}),r}},function(t,e,n){t.exports={"default":n(124),__esModule:!0}},function(t,e,n){t.exports={"default":n(125),__esModule:!0}},function(t,e,n){t.exports={"default":n(127),__esModule:!0}},function(t,e,n){t.exports={"default":n(128),__esModule:!0}},function(t,e,n){t.exports={"default":n(129),__esModule:!0}},function(t,e,n){t.exports={"default":n(131),__esModule:!0}},function(t,e,n){t.exports={"default":n(132),__esModule:!0}},function(t,e,n){t.exports={"default":n(133),__esModule:!0}},function(t,e,n){t.exports={"default":n(134),__esModule:!0}},function(t,e,n){n(51),n(50),t.exports=n(153)},function(t,e,n){n(51),n(50),t.exports=n(154)},function(t,e,n){var r=n(2),s=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},function(t,e,n){n(156),t.exports=n(2).Object.assign},function(t,e,n){n(157);var r=n(2).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){n(158);var r=n(2).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(159),t.exports=n(2).Object.getPrototypeOf},function(t,e,n){n(160),t.exports=n(2).Object.keys},function(t,e,n){n(161),t.exports=n(2).Object.setPrototypeOf},function(t,e,n){n(163),n(162),n(164),n(165),t.exports=n(2).Symbol},function(t,e,n){n(50),n(51),t.exports=n(49).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(13),s=n(151),i=n(150);t.exports=function(t){return function(e,n,o){var u,a=r(e),c=s(a.length),l=i(o,c);if(t&&n!=n){for(;c>l;)if(u=a[l++],u!=u)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(17),s=n(42),i=n(30);t.exports=function(t){var e=r(t),n=s.f;if(n)for(var o,u=n(t),a=i.f,c=0;u.length>c;)a.call(t,o=u[c++])&&e.push(o);return e}},function(t,e,n){t.exports=n(8).document&&document.documentElement},function(t,e,n){var r=n(37);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(41),s=n(31),i=n(43),o={};n(16)(o,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:s(1,n)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(17),s=n(13);t.exports=function(t,e){for(var n,i=s(t),o=r(i),u=o.length,a=0;u>a;)if(i[n=o[a++]]===e)return n}},function(t,e,n){var r=n(33)("meta"),s=n(19),i=n(11),o=n(12).f,u=0,a=Object.isExtensible||function(){return!0},c=!n(15)(function(){return a(Object.preventExtensions({}))}),l=function(t){o(t,r,{value:{i:"O"+ ++u,w:{}}})},p=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!a(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!i(t,r)){if(!a(t))return!0;if(!e)return!1;l(t)}return t[r].w},h=function(t){return c&&d.NEED&&a(t)&&!i(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:p,getWeak:f,onFreeze:h}},function(t,e,n){"use strict";var r=n(17),s=n(42),i=n(30),o=n(32),u=n(70),a=Object.assign;t.exports=!a||n(15)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=a({},t)[n]||Object.keys(a({},e)).join("")!=r})?function(t,e){for(var n=o(t),a=arguments.length,c=1,l=s.f,p=i.f;a>c;)for(var f,h=u(arguments[c++]),d=l?r(h).concat(l(h)):r(h),g=d.length,y=0;g>y;)p.call(h,f=d[y++])&&(n[f]=h[f]);return n}:a},function(t,e,n){var r=n(12),s=n(14),i=n(17);t.exports=n(9)?Object.defineProperties:function(t,e){s(t);for(var n,o=i(e),u=o.length,a=0;u>a;)r.f(t,n=o[a++],e[n]);return t}},function(t,e,n){var r=n(13),s=n(73).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return s(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==i.call(t)?u(t):s(r(t))}},function(t,e,n){var r=n(19),s=n(14),i=function(t,e){if(s(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(67)(Function.call,n(72).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(46),s=n(38);t.exports=function(t){return function(e,n){var i,o,u=String(s(e)),a=r(n),c=u.length;return a<0||a>=c?t?"":void 0:(i=u.charCodeAt(a),i<55296||i>56319||a+1===c||(o=u.charCodeAt(a+1))<56320||o>57343?t?u.charAt(a):i:t?u.slice(a,a+2):(i-55296<<10)+(o-56320)+65536)}}},function(t,e,n){var r=n(46),s=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?s(t+e,0):i(t,e)}},function(t,e,n){var r=n(46),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},function(t,e,n){var r=n(66),s=n(5)("iterator"),i=n(20);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(14),s=n(152);t.exports=n(2).getIterator=function(t){var e=s(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(66),s=n(5)("iterator"),i=n(20);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[s]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){"use strict";var r=n(136),s=n(142),i=n(20),o=n(13);t.exports=n(71)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,s(1)):"keys"==e?s(0,n):"values"==e?s(0,t[n]):s(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(10);r(r.S+r.F,"Object",{assign:n(145)})},function(t,e,n){var r=n(10);r(r.S,"Object",{create:n(41)})},function(t,e,n){var r=n(10);r(r.S+r.F*!n(9),"Object",{defineProperty:n(12).f})},function(t,e,n){var r=n(32),s=n(74);n(76)("getPrototypeOf",function(){return function(t){return s(r(t))}})},function(t,e,n){var r=n(32),s=n(17);n(76)("keys",function(){return function(t){return s(r(t))}})},function(t,e,n){var r=n(10);r(r.S,"Object",{setPrototypeOf:n(148).set})},function(t,e){},function(t,e,n){"use strict";var r=n(8),s=n(11),i=n(9),o=n(10),u=n(77),a=n(144).KEY,c=n(15),l=n(45),p=n(43),f=n(33),h=n(5),d=n(49),g=n(48),y=n(143),_=n(138),m=n(140),v=n(14),b=n(13),j=n(47),w=n(31),x=n(41),P=n(147),I=n(72),E=n(12),O=n(17),T=I.f,C=E.f,S=P.f,k=r.Symbol,L=r.JSON,A=L&&L.stringify,R="prototype",N=h("_hidden"),M=h("toPrimitive"),U={}.propertyIsEnumerable,D=l("symbol-registry"),q=l("symbols"),B=l("op-symbols"),F=Object[R],H="function"==typeof k,G=r.QObject,z=!G||!G[R]||!G[R].findChild,K=i&&c(function(){return 7!=x(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=T(F,e);r&&delete F[e],C(t,e,n),r&&t!==F&&C(F,e,r)}:C,Y=function(t){var e=q[t]=x(k[R]);return e._k=t,e},$=H&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},W=function(t,e,n){return t===F&&W(B,e,n),v(t),e=j(e,!0),v(n),s(q,e)?(n.enumerable?(s(t,N)&&t[N][e]&&(t[N][e]=!1),n=x(n,{enumerable:w(0,!1)})):(s(t,N)||C(t,N,w(1,{})),t[N][e]=!0),K(t,e,n)):C(t,e,n)},X=function(t,e){v(t);for(var n,r=_(e=b(e)),s=0,i=r.length;i>s;)W(t,n=r[s++],e[n]);return t},V=function(t,e){return void 0===e?x(t):X(x(t),e)},Q=function(t){var e=U.call(this,t=j(t,!0));return!(this===F&&s(q,t)&&!s(B,t))&&(!(e||!s(this,t)||!s(q,t)||s(this,N)&&this[N][t])||e)},J=function(t,e){if(t=b(t),e=j(e,!0),t!==F||!s(q,e)||s(B,e)){var n=T(t,e);return!n||!s(q,e)||s(t,N)&&t[N][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=S(b(t)),r=[],i=0;n.length>i;)s(q,e=n[i++])||e==N||e==a||r.push(e);return r},tt=function(t){for(var e,n=t===F,r=S(n?B:b(t)),i=[],o=0;r.length>o;)!s(q,e=r[o++])||n&&!s(F,e)||i.push(q[e]);return i};H||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(B,n),s(this,N)&&s(this[N],t)&&(this[N][t]=!1),K(this,t,w(1,n))};return i&&z&&K(F,t,{configurable:!0,set:e}),Y(t)},u(k[R],"toString",function(){return this._k}),I.f=J,E.f=W,n(73).f=P.f=Z,n(30).f=Q,n(42).f=tt,i&&!n(40)&&u(F,"propertyIsEnumerable",Q,!0),d.f=function(t){return Y(h(t))}),o(o.G+o.W+o.F*!H,{Symbol:k});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var et=O(h.store),nt=0;et.length>nt;)g(et[nt++]);o(o.S+o.F*!H,"Symbol",{"for":function(t){return s(D,t+="")?D[t]:D[t]=k(t)},keyFor:function(t){if($(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!H,"Object",{create:V,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),L&&o(o.S+o.F*(!H||c(function(){var t=k();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var e,n,r=[t],s=1;arguments.length>s;)r.push(arguments[s++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!$(e))return e}),r[1]=e,A.apply(L,r)}}}),k[R][M]||n(16)(k[R],M,k[R].valueOf),p(k,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(t,e,n){n(48)("asyncIterator")},function(t,e,n){n(48)("observable")},function(t,e,n){(function(){var e,r=function(t,e){return function(){return t.apply(e,arguments)}};e=n(6)("gitlab:ApiBase"),t.exports.ApiBase=function(){function t(t){this.options=t,this.init=r(this.init,this),this.handleOptions=r(this.handleOptions,this),this.handleOptions(),this.init(),e("constructor()")}return t.prototype.handleOptions=function(){var t;return null==(t=this.options).verbose&&(t.verbose=!1),e("handleOptions()")},t.prototype.init=function(){return this.client=this,e("init()"),this.groups=n(52)(this.client),this.projects=n(56)(this.client),this.issues=n(53)(this.client),this.notes=n(55)(this.client),this.users=n(57)(this.client),this.labels=n(54)(this.client)},t}()}).call(this)},function(t,e,n){(function(){var e,r,s,i,o=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(6)("gitlab:ApiBaseHTTP"),e=n(166).ApiBase,s=n(94),i=n(176),t.exports.ApiBaseHTTP=function(t){function e(){return this.patch=o(this.patch,this),this.put=o(this.put,this),this.post=o(this.post,this),this["delete"]=o(this["delete"],this),this.get=o(this.get,this),this.fn_wrapper=o(this.fn_wrapper,this),this.prepare_opts=o(this.prepare_opts,this),this.init=o(this.init,this),this.handleOptions=o(this.handleOptions,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.handleOptions=function(){var t,n,s;if(e.__super__.handleOptions.apply(this,arguments),null==(t=this.options).base_url&&(t.base_url=""),!this.options.url)throw"`url` is mandatory";if(!this.options.token&&!this.options.oauth_token)throw"`private_token` or `oauth_token` is mandatory";return null==(n=this.options).slumber&&(n.slumber={}),null==(s=this.options.slumber).append_slash&&(s.append_slash=!1),this.options.url=this.options.url.replace(/\/api\/v3/,""),null!=this.options.auth&&(this.options.slumber.auth=this.options.auth),r("handleOptions()")},e.prototype.init=function(){var t;return e.__super__.init.apply(this,arguments),t=i.API(this.options.url,this.options.slumber),this.slumber=t(this.options.base_url)},e.prototype.prepare_opts=function(t){return null==t.__query&&(t.__query={}),this.options.token?t.headers={"PRIVATE-TOKEN":this.options.token}:t.headers={Authorization:"Bearer "+this.options.oauth_token},t},e.prototype.fn_wrapper=function(t){return function(e){return function(e,n,r){var s;switch(s=t.length){case 1:return t(r);case 2:return t(e,r||JSON.parse(n.body).message);case 3:return t(e,n,r)}}}(this)},e.prototype.get=function(t,e,n){var r;return null==e&&(e={}),null==n&&(n=null),"function"==typeof e&&(n=e,e={}),r=this.prepare_opts(e),this.slumber(t).get(r,this.fn_wrapper(n))},e.prototype["delete"]=function(t,e){var n;return null==e&&(e=null),n=this.prepare_opts({}),this.slumber(t)["delete"](n,this.fn_wrapper(e))},e.prototype.post=function(t,e,n){var r;return null==e&&(e={}),null==n&&(n=null),r=this.prepare_opts(e),this.slumber(t).post(r,this.fn_wrapper(n))},e.prototype.put=function(t,e,n){var r;return null==e&&(e={}),null==n&&(n=null),r=this.prepare_opts(e),this.slumber(t).put(r,this.fn_wrapper(n))},e.prototype.patch=function(t,e,n){var r;return null==e&&(e={}),null==n&&(n=null),r=this.prepare_opts(e),this.slumber(t).patch(r,this.fn_wrapper(n))},e}(e)}).call(this)},function(t,e,n){(function(){var e,r,s=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=n(6)("gitlab:ApiV3"),e=n(167).ApiBaseHTTP,t.exports.ApiV3=function(t){function e(){return this.handleOptions=s(this.handleOptions,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.handleOptions=function(){return e.__super__.handleOptions.apply(this,arguments),this.options.base_url="api/v3",r("handleOptions()")},e}(e)}).call(this)},function(t,e,n){function r(t){return n(s(t))}function s(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./Groups":52,"./Groups.js":52,"./IssueNotes":78,"./IssueNotes.js":78,"./Issues":53,"./Issues.js":53,"./Labels":54,"./Labels.js":54,"./Notes":55,"./Notes.js":55,"./ProjectBuilds":79,"./ProjectBuilds.js":79,"./ProjectDeployKeys":80,"./ProjectDeployKeys.js":80,"./ProjectHooks":81,"./ProjectHooks.js":81,"./ProjectIssues":82,"./ProjectIssues.js":82,"./ProjectLabels":83,"./ProjectLabels.js":83,"./ProjectMembers":84,"./ProjectMembers.js":84,"./ProjectMergeRequests":85,"./ProjectMergeRequests.js":85,"./ProjectMilestones":86,"./ProjectMilestones.js":86,"./ProjectRepository":87,"./ProjectRepository.js":87,"./ProjectServices":88,"./ProjectServices.js":88,"./Projects":56,"./Projects.js":56,"./UserKeys":89,"./UserKeys.js":89,"./Users":57,"./Users.js":57};r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id=169},function(t,e,n){(function(){var e;e=n(168).ApiV3,t.exports=function(t){return new e(t)},t.exports.ApiV3=e}).call(this)},function(t,e){t.exports={_args:[[{raw:"slumber@0.9.0",scope:null,escapedName:"slumber",name:"slumber",rawSpec:"0.9.0",spec:"0.9.0",type:"version"},"E:\\Projects\\auth0-bitbucket-deploy\\node_modules\\gitlab"]],_from:"slumber@0.9.0",_id:"slumber@0.9.0",_inCache:!0,_installable:!0,_location:"/slumber",_nodeVersion:"5.6.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/slumber-0.9.0.tgz_1458818607279_0.5753637356683612"},_npmUser:{name:"m42am",email:"m@42.am"},_npmVersion:"3.6.0",_phantomChildren:{},_requested:{raw:"slumber@0.9.0",scope:null,escapedName:"slumber",name:"slumber",rawSpec:"0.9.0",spec:"0.9.0",type:"version"},_requiredBy:["/gitlab"],_resolved:"https://registry.npmjs.org/slumber/-/slumber-0.9.0.tgz",_shasum:"64e343cc370ff713d36714a4c0c7270c6a94386c",_shrinkwrap:null,_spec:"slumber@0.9.0",_where:"E:\\Projects\\auth0-bitbucket-deploy\\node_modules\\gitlab",author:{name:"Manfred Touron",email:"m@42.am"},bugs:{url:"https://github.com/moul/node-slumber/issues"},dependencies:{debug:"^2.1.3",querystring:"0.2.0",request:"^2.55.0",yamljs:"0.1"},description:"Port of Python's slumber library -- A library that makes consuming a RESTful API easier and more convenient",devDependencies:{"coffee-script":"",connect:"2",express:"",freeport:"",mocha:"",url:"0.7",yamljs:"0.1"},directories:{example:"examples",test:"tests"},dist:{shasum:"64e343cc370ff713d36714a4c0c7270c6a94386c",tarball:"https://registry.npmjs.org/slumber/-/slumber-0.9.0.tgz"},gitHead:"000bf92f5eb950661e3629feed7a6706b49d6e2b",homepage:"https://github.com/moul/node-slumber#readme",keywords:["slumber","python","api","request","rest","json","yaml","restful"],license:"MIT",main:"lib/index.js",maintainers:[{name:"m42am",email:"m@42.am"}],name:"slumber",optionalDependencies:{yamljs:"0.1"},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/moul/node-slumber.git"},scripts:{build:"./node_modules/coffee-script/bin/cake build",test:"./node_modules/mocha/bin/mocha tests",watch:"./node_modules/coffee-script/bin/cake watch","watch-test":"./node_modules/mocha/bin/mocha -w tests"},version:"0.9.0"}},function(t,e){t.exports={title:"Gitlab Deployments",name:"auth0-gitlab-deploy",version:"0.1.0",author:"auth0",description:"This extension gives Auth0 customers the possibility to deploy Rules and Custom Database Connections from GitLab.",type:"application",logoUrl:"https://cdn.auth0.com/extensions/auth0-gitlab-deploy/assets/logo.svg",initialUrlPath:"/login",uninstallConfirmMessage:"Do you really want to uninstall this extension? Doing so will stop any Rules and Database Connection scripts from being deployed from GitLab to Auth0.",repository:"https://github.com/auth0-extensions/auth0-gitlab-deploy",keywords:["auth0","extension"],auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:connections update:connections read:rules create:rules update:rules delete:rules delete:clients"},secrets:{GITLAB_REPOSITORY:{example:"myorganization/myrepo",description:"The repository from which you want to deploy rules and database scripts",required:!0},GITLAB_BRANCH:{description:"The branch we should monitor for commits","default":"master",required:!0},GITLAB_TOKEN:{description:"Your personal access token for GitLab",required:!0,type:"password"},SLACK_INCOMING_WEBHOOK_URL:{example:"https://hooks.slack.com/services/...",description:"Webhook URL for Slack used to notify you of successful and failed deployments",required:!1}}}},function(t,e,n){const r=n(186),s=n(22),i=["max","maxAge","length","dispose","stale"];t.exports=function(t){const e=new r(s.pick(t,i)),n=t.load,o=t.hash,u=t.bypass,a=new Map;if(t.disable)return n;const c=function(){const t=s.toArray(arguments),r=t.slice(0,-1),i=t.slice(-1).pop(),c=this;var l;if(u&&u.apply(c,r))return n.apply(c,t);l=0!==r.length||o?o.apply(c,r):"_";var p=e.get(l);return p?i.apply(null,[null].concat(p)):void(a.get(l)?a.get(l).push(i):(a.set(l,[]),n.apply(c,r.concat(function(t){const n=s.toArray(arguments);t||e.set(l,n.slice(1)),a.get(l).forEach(function(t){t.apply(null,n)}),a["delete"](l),i.apply(null,n)}))))};return c.keys=e.keys.bind(e),c},t.exports.sync=function(t){const e=new r(s.pick(t,i)),n=t.load,o=t.hash,u=t.disable,a=t.bypass,c=this;if(u)return n;const l=function(){var t=s.toArray(arguments);if(a&&a.apply(c,arguments))return n.apply(c,arguments);
var r=o.apply(c,t),i=e.get(r);if(i)return i;var u=n.apply(c,t);return e.set(r,u),u};return l.keys=e.keys.bind(e),l}},function(t,e,n){(function(){var e,r,s,i,o,u,a,c,l,p,f=function(t,e){return function(){return t.apply(e,arguments)}};c=n(94),o=n(6)("slumber:api"),l=n(177),i=l.callable,s=l.append_slash,a=l.merge,u=l.hasInsensitive,p=n(189),r=n(175).Serializer,e=i(function(){function t(t,e,n){var i,o,u,a,c;if(this.opts=null!=e?e:{},null==n&&(n=null),this.patch=f(this.patch,this),this.put=f(this.put,this),this.post=f(this.post,this),this["delete"]=f(this["delete"],this),this.get=f(this.get,this),this.wrap_response=f(this.wrap_response,this),this._prepare_opts=f(this._prepare_opts,this),this._request=f(this._request,this),this._construct_request=f(this._construct_request,this),this._try_to_serialize=f(this._try_to_serialize,this),this._create_child=f(this._create_child,this),null!=t&&(this.opts.base_url=t),null==(i=this.opts).append_slash&&(i.append_slash=!0),null==(o=this.opts).auth&&(o.auth=null),null==(u=this.opts).request_opts&&(u.request_opts={rejectUnauthorized:!1}),null==(a=this.opts).format&&(a.format="json"),this.serializer=null!=(c=this.opts).serializer?c.serializer:c.serializer=new r(this.opts.format),this.opts.append_slash&&(this.opts.base_url=s(this.opts.base_url)),this.base_url=this.opts.base_url,!this.opts.base_url)throw"base_url is required";return process.nextTick(function(){if(n)return n(this)}),this}return t.prototype._create_child=function(t){var n,r,i;return i=""+s(this.base_url)+t,n=e,r=new n(i,this.opts)},t.prototype._try_to_serialize=function(t,e){var n,r,s,i;if(null!=t.headers["content-type"]){n=t.headers["content-type"].split(";")[0].replace(/^\s*|\s*$/g,"");try{i=this.serializer.get_serializer(null,n)}catch(s){return r=s,e}return i.loads(e)}return e},t.prototype._construct_request=function(t,e){var r,s,i,o,l,p,f,h;f={url:this.base_url,method:t,headers:{}},null!=this.opts.headers&&(f.headers=a(f.headers,this.opts.headers)),null!=e.headers&&(f.headers=a(f.headers,e.headers)),l=this.opts.request_opts;for(i in l)h=l[i],null==f[i]&&(f[i]=h);return null==(r=f.headers).accept&&(r.accept=this.serializer.get_serializer().get_content_type()),0!==Object.keys(e.args).length?f.url+="?"+c.stringify(e.args):"/"===f.url.substr(-1)&&(f.url=f.url.substr(0,f.url.length-1)),null!=e.data&&(o="json","application/x-www-form-urlencoded"===(null!=(p=e.headers)?p["content-type"]:void 0)&&(o="form"),f[o]=e.data),this.opts.auth&&(f.auth={user:this.opts.auth[0],pass:this.opts.auth[1],sentImmediately:!0}),this.opts.proxy&&(f.proxy=opts.proxy),u(f.headers,"user-agent")||(s=n(171).version,f.headers["User-Agent"]="node-slumber/"+s),f},t.prototype._request=function(t,e,n){var r,s;return s=this._construct_request(t,e),o(""+t,s.url),r=p(s,n)},t.prototype.callable=t.prototype._create_child,t.prototype._prepare_opts=function(t,e){var n,r,s,i,o,u,a;null==e&&(e="args"),i={args:{},data:{}},o={query:"args"};for(r in t)if(a=t[r],"__"===r.slice(0,2)){s=r.slice(2),null!=o[s]&&(s=o[s]);for(n in a)u=a[n],i[s][n]=u}else"headers"===r?i.headers=a:i[e][r]=a;return i},t.prototype.wrap_response=function(t,e,n,r){switch(t.length){case 1:return t(r);case 2:return t(e,r);case 3:return t(e,n,r)}},t.prototype.get=function(t,e){var n,r,s;if("function"==typeof t&&(e=t,t={}),null==e)throw Error("Missing callback");return r=this._prepare_opts(t,"args"),n=function(t){return function(n,r,s){var i;return n?t.wrap_response(e,n,null,null):200<=(i=r.statusCode)&&i<=299?t.wrap_response(e,n,r,t._try_to_serialize(r,s)):(null!=r?r.statusCode:void 0)?t.wrap_response(e,{statusCode:r.statusCode},r,null):t.wrap_response(e,!0,r,null)}}(this),s=this._request("GET",r,n)},t.prototype["delete"]=function(t,e){var n,r,s;if("function"==typeof t&&(e=t,t={}),null==e)throw Error("Missing callback");return r=this._prepare_opts(t,"args"),n=function(t){return function(n,r,s){var i;return 200<=(i=r.statusCode)&&i<=299?204===r.statusCode?t.wrap_response(e,n,r,!0):t.wrap_response(e,n,r,!0):t.wrap_response(e,!0,r,!1)}}(this),s=this._request("DELETE",r,n)},t.prototype.post=function(t,e){var n,r,s;if(null==e)throw Error("Missing callback");return r=this._prepare_opts(t,"data"),n=function(t){return function(n,r,s){var i;return 200<=(i=r.statusCode)&&i<=299?t.wrap_response(e,n,r,t._try_to_serialize(r,s)):t.wrap_response(e,n,r,!0)}}(this),s=this._request("POST",r,n)},t.prototype.put=function(t,e){var n,r,s;if(null==e)throw Error("Missing callback");return r=this._prepare_opts(t,"data"),n=function(t){return function(n,r,s){var i;return 200<=(i=r.statusCode)&&i<=299?t.wrap_response(e,n,r,t._try_to_serialize(r,s)):t.wrap_response(e,!0,r,null)}}(this),s=this._request("PUT",r,n)},t.prototype.patch=function(t,e){var n,r,s;if(null==e)throw Error("Missing callback");return r=this._prepare_opts(t,"data"),n=function(t){return function(n,r,s){var i;return 200<=(i=r.statusCode)&&i<=299?t.wrap_response(e,n,r,t._try_to_serialize(r,s)):t.wrap_response(e,n,r,!0)}}(this),s=this._request("PATCH",r,n)},t}()),t.exports=e}).call(this)},function(t,e,n){(function(){var e,r,s,i,o,u,a=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=n(6)("slumber:Serializer"),e=function(){function t(){this.dumps=a(this.dumps,this),this.loads=a(this.loads,this),this.get_content_type=a(this.get_content_type,this),this.debug=n(6)("slumber:"+this.constructor.name),this.debug("constructor")}return t.prototype.content_types=null,t.prototype.key=null,t.prototype.get_content_type=function(){if(null==this.content_types)throw"Not Implemented";return this.content_types[0]},t.prototype.loads=function(t){throw"Not Implemented"},t.prototype.dumps=function(t){throw"Not Implemented"},t}(),s=t.exports.SERIALIZERS={},r=function(t){function e(){return this.dumps=a(this.dumps,this),this.loads=a(this.loads,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.content_types=["application/json","application/x-javascript","text/javascript","text/x-javascript","text/x-json"],e.prototype.key="json",e.prototype.loads=function(t){return"string"==typeof t?JSON.parse(t):t},e.prototype.dumps=function(t){return JSON.stringify(t)},e}(e),s.json=r;try{u=n(178),i=function(t){function e(){return this.dumps=a(this.dumps,this),this.loads=a(this.loads,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.content_types=["text/yaml"],e.prototype.key="yaml",e.prototype.loads=function(t){return u.parse(t)},e.prototype.dumps=function(t){return u.stringify(t)},e}(e),s.yaml=i}catch(p){}t.exports.Serializer=function(){function t(t,e){var n,r,i,u,c;if(this["default"]=null!=t?t:"json",null==e&&(e=null),this.get_content_type=a(this.get_content_type,this),this.dumps=a(this.dumps,this),this.loads=a(this.loads,this),this.get_serializer=a(this.get_serializer,this),o("constructor","@default="+this["default"],"serializers="+e),null==e&&(e=[function(){var t;t=[];for(r in s)u=s[r],t.push(new u);return t}()][0]),!e)throw"There are no available serializers.";for(this.serializers={},n=0,i=e.length;n<i;n++)c=e[n],this.serializers[c.key]=c}return t.prototype.get_serializer=function(t,e){var n,r,s,i,o,u,a;if(null==t&&(t=null),null==e&&(e=null),null===t&&null===e)return this.serializers[this["default"]];if(null!=t){if(null==this.serializers[t])throw t+" is not an available serializer";return this.serializers[t]}if(null!=e){i=this.serializers;for(a in i)for(u=i[a],o=u.content_types,r=0,s=o.length;r<s;r++)if(n=o[r],e===n)return u;throw"there is no available serializer for content-type "+e}},t.prototype.loads=function(t,e){var n;return null==e&&(e=null),n=this.get_serializer(e),n.loads(t)},t.prototype.dumps=function(t,e){var n;return null==e&&(e=null),n=this.get_serializer(e),n.dumps(t)},t.prototype.get_content_type=function(t){var e;return null==t&&(t=null),e=this.get_serializer(t),e.get_content_type()},t}()}).call(this)},function(t,e,n){(function(){var e;e=n(174),t.exports=e,t.exports.API=e}).call(this)},function(t,e,n){(function(){var r,s,i=[].slice;r=n(6)("slumber:utils"),t.exports.callable=function(t){var e,n;return e=function(){var e,n,r;return e=1<=arguments.length?i.call(arguments,0):[],n=function(){return n.callable.apply(n,arguments)},n.__proto__=t.prototype,r=t.call.apply(t,[n].concat(i.call(e))),"object"==typeof r?r:n},e.__proto__=t,e.prototype=t.prototype,n=Function.prototype,e.prototype.call=n.call,e.prototype.apply=n.apply,e},t.exports.append_slash=function(t){return t.replace(/\/$/,"")+"/"},e.merge=function(t,e){return s(s({},t),e)},s=e.extend=function(t,e){var n,r;for(n in e)r=e[n],t[n]=r;return t},e.hasInsensitive=function(t,e){var n,r;if(!e)return!1;e=e.toLowerCase();for(n in t)if(r=t[n],e===n.toLowerCase())return!0;return!1}}).call(this)},function(t,e,n){!function(){var r=function(t,e,n,r){this.rawMessage=t,this.parsedLine=void 0!==e?e:-1,this.snippet=void 0!==n?n:null,this.parsedFile=void 0!==r?r:null,this.updateRepr(),this.message=t};r.prototype={name:"YamlParseException",message:null,parsedFile:null,parsedLine:-1,snippet:null,rawMessage:null,isDefined:function(t){return void 0!=t&&null!=t},getSnippet:function(){return this.snippet},setSnippet:function(t){this.snippet=t,this.updateRepr()},getParsedFile:function(){return this.parsedFile},setParsedFile:function(t){this.parsedFile=t,this.updateRepr()},getParsedLine:function(){return this.parsedLine},setParsedLine:function(t){this.parsedLine=t,this.updateRepr()},updateRepr:function(){this.message=this.rawMessage;var t=!1;"."===this.message.charAt(this.message.length-1)&&(this.message=this.message.substring(0,this.message.length-1),t=!0),null!==this.parsedFile&&(this.message+=" in "+JSON.stringify(this.parsedFile)),this.parsedLine>=0&&(this.message+=" at line "+this.parsedLine),this.snippet&&(this.message+=' (near "'+this.snippet+'")'),t&&(this.message+=".")}};var s=!1,i=function(){};i.prototype={parseFile:function(t,e){if(null==e){var n=this.getFileContents(t),s=null;try{s=this.parse(n)}catch(o){throw o instanceof r&&o.setParsedFile(t),o}return s}this.getFileContents(t,function(t){e((new i).parse(t))})},parse:function(t){var e=new a;return e.parse(t)},dump:function(t,e,n){null==e&&(e=2);var r=new l;return n&&(r.numSpacesForIndentation=n),r.dump(t,e)},getXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<4;e++)try{return new ActiveXObject(t[e])}catch(n){}return null},getFileContents:function(t,e){if(s){var r=n(91);if(null==e){var i=r.readFileSync(t);return null==i?null:""+i}r.readFile(t,function(t,n){e(t?null:n)})}else{var o=this.getXHR();if(null==e)return o.open("GET",t,!1),o.send(null),200==o.status||0==o.status?o.responseText:null;o.onreadystatechange=function(){4==o.readyState&&e(200==o.status||0==o.status?o.responseText:null)},o.open("GET",t,!0),o.send(null)}}};var o={stringify:function(t,e,n){return(new i).dump(t,e,n)},parse:function(t){return(new i).parse(t)},load:function(t,e){return(new i).parseFile(t,e)}};"undefined"!=typeof t&&t.exports&&(e=t.exports=o,s=!0),"undefined"!=typeof window&&(window.YAML=o);var u=function(){};u.prototype={i:null,parse:function(t){var e=null;if(t=this.trim(t),0==t.length)return"";switch(t.charAt(0)){case"[":e=this.parseSequence(t);break;case"{":e=this.parseMapping(t);break;default:e=this.parseScalar(t)}if(""!=t.substr(this.i+1).replace(/^\s*#.*$/,""))throw console.log("oups "+t.substr(this.i+1)),new r('Unexpected characters near "'+t.substr(this.i)+'".');return e},dump:function(t){if(void 0==t||null==t)return"null";if(t instanceof Date)return t.toISOString();if("object"==typeof t)return this.dumpObject(t);if("boolean"==typeof t)return t?"true":"false";if(/^\d+$/.test(t))return"string"==typeof t?"'"+t+"'":parseInt(t);if(this.isNumeric(t))return"string"==typeof t?"'"+t+"'":parseFloat(t);if("number"==typeof t)return t==1/0?".Inf":t==-(1/0)?"-.Inf":isNaN(t)?".NAN":t;var e=new YamlEscaper;return e.requiresDoubleQuoting(t)?e.escapeWithDoubleQuotes(t):e.requiresSingleQuoting(t)?e.escapeWithSingleQuotes(t):""==t?'""':this.getTimestampRegex().test(t)?"'"+t+"'":this.inArray(t.toLowerCase(),["null","~","true","false"])?"'"+t+"'":t},dumpObject:function(t){var e,n=this.getKeys(t),r=null,s=n.length;if(t instanceof Array){for(r=[],e=0;e<s;e++)r.push(this.dump(t[n[e]]));return"["+r.join(", ")+"]"}for(r=[],e=0;e<s;e++)r.push(this.dump(n[e])+": "+this.dump(t[n[e]]));return"{ "+r.join(", ")+" }"},parseScalar:function(t,e,n,s,i){void 0==e&&(e=null),void 0==n&&(n=['"',"'"]),void 0==s&&(s=0),void 0==i&&(i=!0);var o=null,u=null,a=null;if(this.inArray(t[s],n)){if(o=this.parseQuotedScalar(t,s),s=this.i,null!==e){var c=t.substr(s).replace(/^\s+/,"");if(!this.inArray(c.charAt(0),e))throw new r("Unexpected characters ("+t.substr(s)+").")}}else{if(e){if(!(a=new RegExp("^(.+?)("+e.join("|")+")").exec((t+"").substring(s))))throw new r("Malformed inline YAML string ("+t+").");o=a[1],s+=o.length}else o=(t+"").substring(s),s+=o.length,u=o.indexOf(" #"),u!=-1&&(o=o.substr(0,u).replace(/\s+$/g,""));o=i?this.evaluateScalar(o):o}return this.i=s,o},parseQuotedScalar:function(t,e){var n=null;if(!(n=new RegExp("^"+u.REGEX_QUOTED_STRING).exec((t+"").substring(e))))throw new r("Malformed inline YAML string ("+(t+"").substring(e)+").");var s=n[0].substr(1,n[0].length-2),i=new c;return s='"'==(t+"").charAt(e)?i.unescapeDoubleQuotedString(s):i.unescapeSingleQuotedString(s),e+=n[0].length,this.i=e,s},parseSequence:function(t,e){void 0==e&&(e=0);var n=[],s=t.length;for(e+=1;e<s;){switch(t.charAt(e)){case"[":n.push(this.parseSequence(t,e)),e=this.i;break;case"{":n.push(this.parseMapping(t,e)),e=this.i;break;case"]":return this.i=e,n;case",":case" ":break;default:var i=this.inArray(t.charAt(e),['"',"'"]),o=this.parseScalar(t,[",","]"],['"',"'"],e);if(e=this.i,!i&&(o+"").indexOf(": ")!=-1)try{o=this.parseMapping("{"+o+"}")}catch(u){if(!(u instanceof r))throw u}n.push(o),e--}e++}throw new r('Malformed inline YAML string "'+t+'"')},parseMapping:function(t,e){void 0==e&&(e=0);var n={},s=t.length;e+=1;for(var i=!1,o=!1;e<s;){switch(o=!1,t.charAt(e)){case" ":case",":e++,o=!0;break;case"}":return this.i=e,n}if(!o){var u=this.parseScalar(t,[":"," "],['"',"'"],e,!1);for(e=this.i,i=!1;e<s;){switch(t.charAt(e)){case"[":n[u]=this.parseSequence(t,e),e=this.i,i=!0;break;case"{":n[u]=this.parseMapping(t,e),e=this.i,i=!0;break;case":":case" ":break;default:n[u]=this.parseScalar(t,[",","}"],['"',"'"],e),e=this.i,i=!0,e--}if(++e,i){o=!0;break}}}}throw new r('Malformed inline YAML string "'+t+'"')},evaluateScalar:function(t){t=this.trim(t);var e=null,n=null;return"null"==t.toLowerCase()||""==t||"~"==t?null:0==(t+"").indexOf("!str ")?(""+t).substring(5):0==(t+"").indexOf("! ")?parseInt(this.parseScalar((t+"").substr(2))):/^\d+$/.test(t)?(e=t,n=parseInt(t),"0"==t.charAt(0)?this.octdec(t):""+e==""+n?n:e):"true"==(t+"").toLowerCase()||"false"!=(t+"").toLowerCase()&&(this.isNumeric(t)?"0x"==(t+"").substr(0,2)?this.hexdec(t):parseFloat(t):".inf"==t.toLowerCase()?1/0:".nan"==t.toLowerCase()?NaN:"-.inf"==t.toLowerCase()?-(1/0):/^(-|\+)?[0-9,]+(\.[0-9]+)?$/.test(t)?parseFloat(t.split(",").join("")):this.getTimestampRegex().test(t)?new Date(this.strtotime(t)):""+t)},getTimestampRegex:function(){return new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:.([0-9]*))?(?:[ \t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$","gi")},trim:function(t){return(t+"").replace(/^\s+/,"").replace(/\s+$/,"")},isNumeric:function(t){return t-0==t&&t.length>0&&""!=t.replace(/\s+/g,"")},inArray:function(t,e){var n,r=e.length;for(n=0;n<r;n++)if(t==e[n])return!0;return!1},getKeys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},octdec:function(t){return parseInt((t+"").replace(/[^0-7]/gi,""),8)},hexdec:function(t){return t=this.trim(t),"0x"==(t+"").substr(0,2)&&(t=(t+"").substring(2)),parseInt((t+"").replace(/[^a-f0-9]/gi,""),16)},strtotime:function(t,e){var n,r,s,i,o="";if(t=(t+"").replace(/\s{2,}|^\s|\s$/g," ").replace(/[\t\r\n]/g,""),"now"===t)return null===e||isNaN(e)?(new Date).getTime()||0:e||0;if(!isNaN(o=Date.parse(t)))return o||0;e=e?new Date(e):new Date,t=t.toLowerCase();var u={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},a=function(t){var n=t[2]&&"ago"===t[2],r=(r="last"===t[0]?-1:1)*(n?-1:1);switch(t[0]){case"last":case"next":switch(t[1].substring(0,3)){case"yea":e.setFullYear(e.getFullYear()+r);break;case"wee":e.setDate(e.getDate()+7*r);break;case"day":e.setDate(e.getDate()+r);break;case"hou":e.setHours(e.getHours()+r);break;case"min":e.setMinutes(e.getMinutes()+r);break;case"sec":e.setSeconds(e.getSeconds()+r);break;case"mon":if("month"===t[1]){e.setMonth(e.getMonth()+r);break}default:var s=u.day[t[1].substring(0,3)];if("undefined"!=typeof s){var i=s-e.getDay();0===i?i=7*r:i>0?"last"===t[0]&&(i-=7):"next"===t[0]&&(i+=7),e.setDate(e.getDate()+i),e.setHours(0,0,0,0)}}break;default:if(!/\d+/.test(t[0]))return!1;switch(r*=parseInt(t[0],10),t[1].substring(0,3)){case"yea":e.setFullYear(e.getFullYear()+r);break;case"mon":e.setMonth(e.getMonth()+r);break;case"wee":e.setDate(e.getDate()+7*r);break;case"day":e.setDate(e.getDate()+r);break;case"hou":e.setHours(e.getHours()+r);break;case"min":e.setMinutes(e.getMinutes()+r);break;case"sec":e.setSeconds(e.getSeconds()+r)}}return!0};if(s=t.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!==s)return s[2]?s[3]||(s[2]+=":00"):s[2]="00:00:00",i=s[1].split(/-/g),i[1]=u.mon[i[1]-1]||i[1],i[0]=+i[0],i[0]=i[0]>=0&&i[0]<=69?"20"+(i[0]<10?"0"+i[0]:i[0]+""):i[0]>=70&&i[0]<=99?"19"+i[0]:i[0]+"",parseInt(this.strtotime(i[2]+" "+i[1]+" "+i[0]+" "+s[2])+(s[4]?s[4]:""),10);var c="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(s=t.match(new RegExp(c,"gi")),null===s)return!1;for(n=0,r=s.length;n<r;n++)if(!a(s[n].split(" ")))return!1;return e.getTime()||0}},u.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')";var a=function(t){this.offset=void 0!==t?t:0};a.prototype={offset:0,lines:[],currentLineNb:-1,currentLine:"",refs:{},parse:function(t){this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(t).split("\n");for(var e=null,n=null;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"==this.currentLine.charAt(0))throw new r("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);var s=!1,i=!1,o=!1,c=null,l=null,p=null,f=null,h=null,d=null,g=null,y=null,_=null;if(c=/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)){if(n&&"mapping"==n)throw new r("You cannot define a sequence item when in a mapping",this.getRealCurrentLineNb()+1,this.currentLine);n="sequence",this.isDefined(e)||(e=[]),c={leadspaces:c[2],value:c[3]},this.isDefined(c.value)&&(l=/^&([^ ]+) *(.*)/.exec(c.value))&&(l={ref:l[1],value:l[2]},s=l.ref,c.value=l.value),this.isDefined(c.value)&&""!=this.trim(c.value)&&"#"!=c.value.replace(/^ +/,"").charAt(0)?this.isDefined(c.leadspaces)&&" "==c.leadspaces&&(l=new RegExp("^("+u.REGEX_QUOTED_STRING+"|[^ '\"{[].*?) *:(\\s+(.+?))?\\s*$").exec(c.value))?(l={key:l[1],value:l[3]},p=this.getRealCurrentLineNb(),f=new a(p),f.refs=this.refs,h=c.value,this.isNextLineIndented()||(h+="\n"+this.getNextEmbedBlock(this.getCurrentLineIndentation()+2)),e.push(f.parse(h)),this.refs=f.refs):e.push(this.parseValue(c.value)):(p=this.getRealCurrentLineNb()+1,f=new a(p),f.refs=this.refs,e.push(f.parse(this.getNextEmbedBlock())),this.refs=f.refs)}else{if(!(c=new RegExp("^("+u.REGEX_QUOTED_STRING+"|[^ '\"[{].*?) *:(\\s+(.+?))?\\s*$").exec(this.currentLine))){if(2==this.lines.length&&this.isEmpty(this.lines[1])){try{t=(new u).parse(this.lines[0])}catch(m){throw m instanceof r&&(m.setParsedLine(this.getRealCurrentLineNb()+1),m.setSnippet(this.currentLine)),m}if(this.isObject(t)){var v=t[0];if("string"==typeof t&&"*"==v.charAt(0)){e=[],y=t.length;for(var b=0;b<y;b++)e.push(this.refs[t[b].substr(1)]);t=e}}return t}throw new r("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.isDefined(e)||(e={}),n&&"sequence"==n)throw new r("You cannot define a mapping item when in a sequence",this.getRealCurrentLineNb()+1,this.currentLine);n="mapping",c={key:c[1],value:c[3]};try{d=(new u).parseScalar(c.key)}catch(m){throw m instanceof r&&(m.setParsedLine(this.getRealCurrentLineNb()+1),m.setSnippet(this.currentLine)),m}if("<<"==d)if(this.isDefined(c.value)&&"*"==(c.value+"").charAt(0)){if(i=c.value.substr(1),void 0==this.refs[i])throw new r('Reference "'+t+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}else{t=this.isDefined(c.value)&&""!=c.value?c.value:this.getNextEmbedBlock(),p=this.getRealCurrentLineNb()+1,f=new a(p),f.refs=this.refs,g=f.parse(t),this.refs=f.refs;var j=[];if(!this.isObject(g))throw new r("YAML merge keys used with a scalar value instead of an array",this.getRealCurrentLineNb()+1,this.currentLine);if(this.isDefined(g[0])){_=this.reverseArray(g),y=_.length;for(var b=0;b<y;b++){if(_[b],!this.isObject(_[b]))throw new r("Merge items must be arrays",this.getRealCurrentLineNb()+1,this.currentLine);j=this.mergeObject(_[b],j)}}else j=this.mergeObject(j,g);o=j}else this.isDefined(c.value)&&(l=/^&([^ ]+) *(.*)/.exec(c.value))&&(l={ref:l[1],value:l[2]},s=l.ref,c.value=l.value);o?e=o:this.isDefined(c.value)&&""!=this.trim(c.value)&&"#"!=this.trim(c.value).charAt(0)?i?e=this.refs[i]:e[d]=this.parseValue(c.value):this.isNextLineIndented()&&!this.isNextLineUnIndentedCollection()?e[d]=null:(p=this.getRealCurrentLineNb()+1,f=new a(p),f.refs=this.refs,e[d]=f.parse(this.getNextEmbedBlock()),this.refs=f.refs)}if(s)if(e instanceof Array)this.refs[s]=e[e.length-1];else{var w=null;for(var x in e)e.hasOwnProperty(x)&&(w=x);this.refs[s]=e[x]}}return this.isEmpty(e)?null:e},getRealCurrentLineNb:function(){return this.currentLineNb+this.offset},getCurrentLineIndentation:function(){return this.currentLine.length-this.currentLine.replace(/^ +/g,"").length},getNextEmbedBlock:function(t){this.moveToNextLine();var e=null,n=null;if(this.isDefined(t))e=t;else{e=this.getCurrentLineIndentation();var s=this.isStringUnIndentedCollectionItem(this.currentLine);if(!this.isCurrentLineEmpty()&&0==e&&!s)throw new r("Indentation problem A",this.getRealCurrentLineNb()+1,this.currentLine)}var i=[this.currentLine.substr(e)],o=this.isStringUnIndentedCollectionItem(this.currentLine),u=-1;for(o===!0&&(u=1+/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)[2].length);this.moveToNextLine();){if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&this.getCurrentLineIndentation()!=u){this.moveToPreviousLine();break}if(this.isCurrentLineEmpty())this.isCurrentLineBlank()&&i.push(this.currentLine.substr(e));else{n=this.getCurrentLineIndentation();var a;if(a=/^( *)$/.exec(this.currentLine))i.push(a[1]);else{if(!(n>=e)){if(0==n){this.moveToPreviousLine();break}throw new r("Indentation problem B",this.getRealCurrentLineNb()+1,this.currentLine)}i.push(this.currentLine.substr(e))}}}return i.join("\n")},moveToNextLine:function(){return!(this.currentLineNb>=this.lines.length-1||(this.currentLineNb++,this.currentLine=this.lines[this.currentLineNb],0))},moveToPreviousLine:function(){this.currentLineNb--,this.currentLine=this.lines[this.currentLineNb]},parseValue:function(t){if("*"==(t+"").charAt(0)){if(t="#"==this.trim(t).charAt(0)?(t+"").substr(1,t.indexOf("#")-2):(t+"").substr(1),void 0==this.refs[t])throw new r('Reference "'+t+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine);return this.refs[t]}var e=null;if(e=/^(\||>)(\+|\-|\d+|\+\d+|\-\d+|\d+\+|\d+\-)?( +#.*)?$/.exec(t)){e={separator:e[1],modifiers:e[2],comments:e[3]};var n=this.isDefined(e.modifiers)?e.modifiers:"";return this.parseFoldedScalar(e.separator,n.replace(/\d+/g,""),Math.abs(parseInt(n)))}try{return(new u).parse(t)}catch(s){throw s instanceof r&&(s.setParsedLine(this.getRealCurrentLineNb()+1),s.setSnippet(this.currentLine)),s}},parseFoldedScalar:function(t,e,n){void 0==e&&(e=""),void 0==n&&(n=0),t="|"==t?"\n":" ";for(var r="",s=null,i=this.moveToNextLine();i&&this.isCurrentLineBlank();)r+="\n",i=this.moveToNextLine();if(!i)return"";var o=null;if(!(o=new RegExp("^("+(n?this.strRepeat(" ",n):" +")+")(.*)$").exec(this.currentLine)))return this.moveToPreviousLine(),"";o={indent:o[1],text:o[2]};var u=o.indent,a=0;for(r+=o.text+t;this.currentLineNb+1<this.lines.length;)if(this.moveToNextLine(),o=new RegExp("^( {"+u.length+",})(.+)$").exec(this.currentLine))o={indent:o[1],text:o[2]}," "==t&&a!=o.indent&&(r=r.substr(0,r.length-1)+"\n"),a=o.indent,s=o.indent.length-u.length,r+=this.strRepeat(" ",s)+o.text+(0!=s?"\n":t);else{if(!(o=/^( *)$/.exec(this.currentLine))){this.moveToPreviousLine();break}r+=o[1].replace(new RegExp("^ {1,"+u.length+"}","g"),"")+"\n"}switch(" "==t&&(r=r.replace(/ (\n*)$/g,"\n$1")),e){case"":r=r.replace(/\n+$/g,"\n");break;case"+":break;case"-":r=r.replace(/\n+$/g,"")}return r},isNextLineIndented:function(){for(var t=this.getCurrentLineIndentation(),e=this.moveToNextLine();e&&this.isCurrentLineEmpty();)e=this.moveToNextLine();if(0==e)return!1;var n=!1;return this.getCurrentLineIndentation()<=t&&(n=!0),this.moveToPreviousLine(),n},isCurrentLineEmpty:function(){return this.isCurrentLineBlank()||this.isCurrentLineComment()},isCurrentLineBlank:function(){return""==this.trim(this.currentLine)},isCurrentLineComment:function(){var t=this.currentLine.replace(/^ +/g,"");return"#"==t.charAt(0)},cleanup:function(t){t=t.split("\r\n").join("\n").split("\r").join("\n"),/\n$/.test(t)||(t+="\n");for(var e=0,n=/^\%YAML[: ][\d\.]+.*\n/;n.test(t);)t=t.replace(n,""),e++;if(this.offset+=e,n=/^(#.*?\n)+/,n.test(t)){var r=t.replace(n,"");this.offset+=this.subStrCount(t,"\n")-this.subStrCount(r,"\n"),t=r}return n=/^\-\-\-.*?\n/,n.test(t)&&(r=t.replace(n,""),this.offset+=this.subStrCount(t,"\n")-this.subStrCount(r,"\n"),t=r,t=t.replace(/\.\.\.\s*$/g,"")),t},isNextLineUnIndentedCollection:function(){for(var t=this.getCurrentLineIndentation(),e=this.moveToNextLine();e&&this.isCurrentLineEmpty();)e=this.moveToNextLine();if(!1===e)return!1;var n=!1;return this.getCurrentLineIndentation()==t&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n},isStringUnIndentedCollectionItem:function(t){return 0===this.currentLine.indexOf("- ")},isObject:function(t){return"object"==typeof t&&this.isDefined(t)},isEmpty:function(t){return void 0==t||null==t||""==t||0==t||"0"==t||0==t},isDefined:function(t){return void 0!=t&&null!=t},reverseArray:function(t){for(var e=[],n=t.length,r=n-1;r>=0;r--)e.push(t[r]);return e},merge:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(/^\d+$/.test(n)?r.push(t):r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(/^\d+$/.test(n)?r.push(e):r[n]=e[n]);return r},strRepeat:function(t,e){var n,r="";for(n=0;n<e;n++)r+=t;return r},subStrCount:function(t,e,n,r){var s=0;t=""+t,e=""+e,void 0!=n&&(t=t.substr(n)),void 0!=r&&(t=t.substr(0,r));for(var i=t.length,o=e.length,u=0;u<i;u++)e==t.substr(u,o)&&s++,u+=o-1;return s},trim:function(t){return(t+"").replace(/^ +/,"").replace(/ +$/,"")}},YamlEscaper=function(){},YamlEscaper.prototype={requiresDoubleQuoting:function(t){return new RegExp(YamlEscaper.REGEX_CHARACTER_TO_ESCAPE).test(t)},escapeWithDoubleQuotes:function(t){t+="";for(var e=YamlEscaper.escapees.length,n=YamlEscaper.escaped.length,r=YamlEscaper.escaped,s=0;s<e;++s)s>=n&&r.push("");var i="";return i=t.replace(new RegExp(YamlEscaper.escapees.join("|"),"g"),function(t){for(var n=0;n<e;++n)if(t==YamlEscaper.escapees[n])return r[n]}),'"'+i+'"'},requiresSingleQuoting:function(t){return/[\s'":{}[\],&*#?]|^[-?|<>=!%@`]/.test(t)},escapeWithSingleQuotes:function(t){return"'"+t.replace(/'/g,"''")+"'"}},YamlEscaper.REGEX_CHARACTER_TO_ESCAPE="[\\x00-\\x1f]||||",YamlEscaper.escapees=["\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\x0B","\f","\r","","","","","","","","","","","","","","","","","","","","","",""],YamlEscaper.escaped=['\\"',"\\\\",'\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"];var c=function(){};c.prototype={unescapeSingleQuotedString:function(t){return t.replace(/''/g,"'")},unescapeDoubleQuotedString:function(t){var e=function(t){return(new c).unescapeCharacter(t)};return t.replace(new RegExp(c.REGEX_ESCAPED_CHARACTER,"g"),e)},unescapeCharacter:function(t){switch(t.charAt(1)){case"0":return String.fromCharCode(0);case"a":return String.fromCharCode(7);case"b":return String.fromCharCode(8);case"t":return"\t";case"\t":return"\t";case"n":return"\n";case"v":return String.fromCharCode(11);case"f":return String.fromCharCode(12);case"r":return String.fromCharCode(13);case"e":return"";case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return"\0";case"_":return"\0";case"L":return" (";case"P":return" )";case"x":return this.pack("n",(new u).hexdec(t.substr(2,2)));case"u":return this.pack("n",(new u).hexdec(t.substr(2,4)));case"U":return this.pack("N",(new u).hexdec(t.substr(2,8)))}},pack:function(t){for(var e,n,r=0,s=1,i="",o=0;r<t.length;){for(e=t.charAt(r),n="",r++;r<t.length&&null!==t.charAt(r).match(/[\d\*]/);)n+=t.charAt(r),r++;switch(""===n&&(n="1"),e){case"n":if("*"===n&&(n=arguments.length-s),n>arguments.length-s)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(o=0;o<n;o++)i+=String.fromCharCode(arguments[s]>>8&255),i+=String.fromCharCode(255&arguments[s]),s++;break;case"N":if("*"===n&&(n=arguments.length-s),n>arguments.length-s)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(o=0;o<n;o++)i+=String.fromCharCode(arguments[s]>>24&255),i+=String.fromCharCode(arguments[s]>>16&255),i+=String.fromCharCode(arguments[s]>>8&255),i+=String.fromCharCode(255&arguments[s]),s++;break;default:throw new Error("Warning:  pack() Type "+e+": unknown format code")}}if(s<arguments.length)throw new Error("Warning: pack(): "+(arguments.length-s)+" arguments unused");return i}},c.REGEX_ESCAPED_CHARACTER='\\\\([0abt\tnvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})';var l=function(){};l.prototype={dump:function(t,e,n){null==e&&(e=0),null==n&&(n=0);var r,s="",i=n?this.strRepeat(" ",n):"";if(this.numSpacesForIndentation||(this.numSpacesForIndentation=2),e<=0||!this.isObject(t)||this.isEmpty(t))r=new u,s+=i+r.dump(t);else{var o,a=!this.arrayEquals(this.getKeys(t),this.range(0,t.length-1));for(var c in t)t.hasOwnProperty(c)&&(o=e-1<=0||!this.isObject(t[c])||this.isEmpty(t[c]),a&&(r=new u),s+=i+""+(a?r.dump(c)+":":"-")+(o?" ":"\n")+this.dump(t[c],e-1,o?0:n+this.numSpacesForIndentation)+(o?"\n":""))}return s},strRepeat:function(t,e){var n,r="";for(n=0;n<e;n++)r+=t;return r},isObject:function(t){return this.isDefined(t)&&"object"==typeof t},isEmpty:function(t){var e=void 0==t||null==t||""==t||0==t||"0"==t||0==t;if(!(e||"object"!=typeof t||t instanceof Array)){var n=0;for(var r in t)t.hasOwnProperty(r)&&n++;e=!n}return e},isDefined:function(t){return void 0!=t&&null!=t},getKeys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},range:function(t,e){if(t>e)return[];for(var n=[],r=t;r<=e;r++)n.push(r);return n},arrayEquals:function(t,e){if(t.length!=e.length)return!1;for(var n=t.length,r=0;r<n;r++)if(t[r]!=e[r])return!1;
return!0}}}()},function(t,e){t.exports=require("auth0")},function(t,e){t.exports=require("auth0-api-jwt-rsa-validation")},function(t,e){t.exports=require("auth0@2.0.0")},function(t,e){t.exports=require("crypto")},function(t,e){t.exports=require("ejs")},function(t,e){t.exports=require("express-jwt")},function(t,e){t.exports=require("jade")},function(t,e){t.exports=require("lru-cache")},function(t,e){t.exports=require("morgan")},function(t,e){t.exports=require("ms")},function(t,e){t.exports=require("request")},function(t,e){t.exports=require("superagent")},function(t,e){t.exports=require("webtask-tools")},function(t,e){t.exports=require("winston")}]);